// Code generated by sgen.exe,2022-04-21 19:06:38. DO NOT EDIT.
// versions: v1.0.0
// 如果确实需要修改,请修改后改文件名,可以移除文件名中的.gen,以防下次生成覆盖

syntax = "proto3";

package service;
option go_package = ".;protosService";
import "google/protobuf/timestamp.proto";

//来源于数据表
message IotDeviceLog {


    // @inject_tag: json:"id" gorm:"default:主键ID;comment:主键ID;size:19;"
    int64 id = 100;


    // @inject_tag: json:"did" gorm:"default:设备唯一ID（14位 1~9 A~Z随机）;comment:设备唯一ID（14位 1~9 A~Z随机）;size:16;"
    string did = 101;


    // @inject_tag: json:"reportTime" gorm:"default:产品ID(t_cloud_product.id);comment:产品ID(t_cloud_product.id);"
    google.protobuf.Timestamp reportTime = 102; 


    // @inject_tag: json:"eventType" gorm:"default:在线状态（0 在线 1 不在线）;comment:在线状态（0 在线 1 不在线）;size:10;"
    int32 eventType = 103;


    // @inject_tag: json:"funcKey" gorm:"default:设备名称;comment:设备名称;size:50;"
    string funcKey = 104;


    // @inject_tag: json:"funcValue" gorm:"default:设备性质;comment:设备性质;size:100;"
    string funcValue = 105;


    // @inject_tag: json:"funcDesc" gorm:"default:设备SN;comment:设备SN;size:100;"
    string funcDesc = 106;


    // @inject_tag: json:"originType" gorm:"default:批次ID(t_cloud_device_batch.id);comment:批次ID(t_cloud_device_batch.id);size:10;"
    int32 originType = 107;


    // @inject_tag: json:"originDetail" gorm:"default:设备组ID（t_cloud_device_group.id）;comment:设备组ID（t_cloud_device_group.id）;size:255;"
    string originDetail = 108;


    // @inject_tag: json:"createdAt" gorm:"default:创建时间;comment:创建时间;"
    google.protobuf.Timestamp createdAt = 109; 

}

message IotDeviceLogFilter {


    // @inject_tag: json:"id" gorm:"default:主键ID;comment:主键ID;size:19;"
    int64 id = 100;


    // @inject_tag: json:"did" gorm:"default:设备唯一ID（14位 1~9 A~Z随机）;comment:设备唯一ID（14位 1~9 A~Z随机）;size:16;"
    string did = 101;


    // @inject_tag: json:"reportTime" gorm:"default:产品ID(t_cloud_product.id);comment:产品ID(t_cloud_product.id);"
    google.protobuf.Timestamp reportTime = 102; 


    // @inject_tag: json:"eventType" gorm:"default:在线状态（0 在线 1 不在线）;comment:在线状态（0 在线 1 不在线）;size:10;"
    int32 eventType = 103;


    // @inject_tag: json:"funcKey" gorm:"default:设备名称;comment:设备名称;size:50;"
    string funcKey = 104;


    // @inject_tag: json:"funcValue" gorm:"default:设备性质;comment:设备性质;size:100;"
    string funcValue = 105;


    // @inject_tag: json:"funcDesc" gorm:"default:设备SN;comment:设备SN;size:100;"
    string funcDesc = 106;


    // @inject_tag: json:"originType" gorm:"default:批次ID(t_cloud_device_batch.id);comment:批次ID(t_cloud_device_batch.id);size:10;"
    int32 originType = 107;


    // @inject_tag: json:"originDetail" gorm:"default:设备组ID（t_cloud_device_group.id）;comment:设备组ID（t_cloud_device_group.id）;size:255;"
    string originDetail = 108;


    // @inject_tag: json:"createdAt" gorm:"default:创建时间;comment:创建时间;"
    google.protobuf.Timestamp createdAt = 109; 

}

message IotDeviceLogListRequest {
    IotDeviceLogQueryObj query = 101;
    int64 page = 102;
    int64 pageSize = 103;
    string orderKey = 104;
    string orderDesc = 105;
}

message IotDeviceLogQueryObj {
    string did  = 101;
    string eventType   = 102;
    string eventKey   = 103;
    string origin  = 104;
    int64 endTime   = 105;
    int64 startTime  = 106;
    int64 isOnlyCount  = 107;//是否仅仅返回统计数量
}

message IotDeviceLogResponse {
    int32 code = 101;
    string message = 102;
    int64 total = 103;
    repeated IotDeviceLog data = 104;
}

message IotDeviceLogUpdateFieldsRequest {
    repeated string fields = 101;
    IotDeviceLog data = 102;
}


// 表模型主键，只能是整数或字符串，若生成错误，请检查数据库表主键是否正确。支持组合主键
message IotDeviceLogPrimarykey {

    int64 id = 100;
}

message IotDeviceLogBatchDeleteRequest {
    repeated IotDeviceLogPrimarykey keys = 101;
}

message IotDeviceLogDExportResponse {
    int32 code = 101;
    string message = 102;
    int64 total = 103;
    string fileName = 104;
    string filePath = 105;
}

message CreateProductLogTableResponse {
    int64 productId = 101;
    string productKey = 102;
    map<string, string> thingModels = 103;
}

message ProductLogRequest {
    int64 productId = 101;//产品Id
    string productKey = 102;//产品Key
    string deviceId = 103;//设备编号
    repeated int64 timeRange = 104;//查询事件范围
    string identifier = 105;//事件名称、事件标识符
    string ns = 106;//协议命名空间
    string name = 107;//协议名称
    int32 eventType = 108;//设备事件
    int32 origin = 109;//来源
    string timezone = 110;//客户时区
}

message ProductLogResponse {
    int32 code = 101;
    string message = 102;
    repeated ProductEventLogItem list = 103;
}

message ProductEventLogItem {
    string date = 101;
    string time = 102;
    repeated ProductLogEventProperties properties = 103;

    string messageId = 104;//消息编号
    string timezone = 105; //时区
    int64 fullTime = 106;
    string from = 107;//来源
    string name = 108;//协议头名称
    string onlineStatus = 109;
}

message ProductLogEventProperties{
    string dpid = 101;
    string value = 102;
    string identifier = 103;
    string name = 104;
    string did = 105;
    string eventType = 106;
}

message ProductLogRecordResponse {
    int32 code = 101;
    string message = 102;
    repeated ProductLogRecord records = 103;
}

message ProductLogRecord{
    string msgId = 100;
    string did = 101;
    string product_key = 102;
    string ver = 103;
    string ns = 104;
    string eventType = 105;
    int64 startTs = 106;
    int64 createdAt = 107;
    string origin = 108;
    repeated ProductLogEventProperties properties = 109;
    string onlineStatus = 110;
    string from = 111;//来源
}

message DeviceOperationFailLogRequest {
    string deviceId = 101;//设备Id
    int32 type = 102;//类型 1-配网 2-OTA升级
    string content = 103;//上报内容
    string userId = 104;//用户Id
    string userAccount = 105; //用户账号
    string tenantId = 106;//租户编号
    string appKey = 107; //APP Key
}

message DeviceOperationFailLogRequestEx {
    string deviceId = 101;//设备Id
    int32 type = 102;//类型 1-配网 2-OTA升级
    string content = 103;//上报内容
    string userId = 104;//用户Id
    string userAccount = 105; //用户账号
    string tenantId = 106;//租户编号
    string appKey = 107; //APP Key
    string productKey = 108;//产品key
    int64 failTime = 109; //时间,时间戳
    int32 code = 110;//错误码
    string timezone = 111;//用户app 时区
    string region = 112;//用户app 登录的区域，区域id
    string lang = 113; //用户app app语言
    string sysinfo = 114;//用户手机系统信息, Android 12,Xiaomi22081212C,1.01
    string uploadFrom = 115;//上报端 app\device\broker
    string uploadMethod = 116;  //上报方式 http\mqtt
}

message OperationFailLogRequest {
   repeated DeviceOperationFailLogRequestEx data = 101;
}

message DeviceOperationFailLogListRequest {
    int64 page = 101;
    int64 pageSize = 102;
    string orderKey = 103;
    string orderDesc = 104;
    string  searchKey = 105;
    DeviceOperationFailLogQueryObj query = 106;
}

message DeviceOperationFailLogQueryObj {
    string did  = 101;
    string code   = 102;
    string productKey   = 103;
    int32 lastDay = 104;//0,今天，7近7天，30近30天，-1所有
    int64 endTime   = 105;
    int64 startTime  = 106;
    string UploadFrom =107;//上报端
    string UploadMethod=108;  //上报方法
}

message DeviceOperationFailLogListResponseObj {
    string id = 100;
    string deviceId = 101;//设备Id
    int32 type = 102;//类型 1-配网 2-OTA升级
    string content = 103;//上报内容
    string userId = 104;//用户Id
    string userAccount = 105; //用户账号
    string tenantId = 106;//租户编号
    string appKey = 107; //APP Key
    string productKey = 108;//产品key
    int64 failTime = 109; //时间,时间戳
    int32 code = 110;//错误码
    string timezone = 111;//用户app 时区
    string region = 112;//用户app 登录的区域，区域id
    string lang = 113; //用户app app语言
    string os = 114;//操作系统
    string model = 115;//手机型号
    string appVersion = 116;//app版本
    string desc = 117;
    string uploadFrom = 118;//上报端 app\device\broker
    string uploadMethod = 119;  //上报方式 http\mqtt
}

message DeviceOperationFailLogListResponse {
    int32 code = 101;
    string message = 102;
    int64 total = 103;
    repeated DeviceOperationFailLogListResponseObj data = 104;
}
