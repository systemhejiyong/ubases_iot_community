(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4f94c560"],{"15ff":function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return o})),a.d(t,"g",(function(){return c})),a.d(t,"f",(function(){return i})),a.d(t,"c",(function(){return s})),a.d(t,"d",(function(){return d})),a.d(t,"e",(function(){return l}));var n=a("b775");function r(e){return Object(n["b"])({url:"/v1/platform/web/open/oem/app/custom/version/add",method:"post",data:e})}function o(e){return Object(n["b"])({url:"/v1/platform/web/open/oem/app/custom/version/edit",method:"post",data:e})}function c(e){return Object(n["b"])({url:"/v1/platform/web/open/oem/app/custom/version/set",method:"post",data:e})}function i(e){return Object(n["b"])({url:"/v1/platform/web/open/oem/app/custom/version/list",method:"post",data:e})}function s(e){return Object(n["b"])({url:"/v1/platform/web/open/oem/app/custom/version/editLaunchMarkets",method:"post",data:e})}function d(e){return Object(n["b"])({url:"/v1/platform/web/open/oem/app/custom/version/editRemark",method:"post",data:e})}function l(e){return Object(n["b"])({url:"/v1/platform/web/open/oem/app/custom/qrCodeUrl",method:"get",params:e})}},"5e86":function(e,t,a){"use strict";a.r(t);a("a15b"),a("d81d"),a("b0c0"),a("a4d3"),a("e01a");var n=function(){var e=this,t=e._self._c;return t("section",{staticClass:"page-wrap"},[t("a-table",{attrs:{size:"small",rowKey:"id","data-source":e.dataSource,columns:e.columns,loading:e.loading,pagination:e.pagination},on:{change:e.onChangePagination},scopedSlots:e._u([{key:"updatedAt",fn:function(t){return[e._v(" "+e._s(e._f("momentFilter")(t))+" ")]}},{key:"launchMarkets",fn:function(t){return[e._v(" "+e._s(t?t.map((function(e){return e.name})).join("„ÄÅ"):"")+" ")]}},{key:"action",fn:function(a){return[t("a-button",{attrs:{type:"link",size:"small"},on:{click:function(t){return e.handleDownload(a)}}},[e._v(e._s(e.$t("public.download")))]),t("a-divider",{attrs:{type:"vertical"}}),t("a-button",{attrs:{type:"link",size:"small"},on:{click:function(t){return e.handleChangeRecord(a)}}},[e._v(e._s(e.$t("shelfRecord.change.record")))]),t("a-divider",{attrs:{type:"vertical"}}),t("a-button",{attrs:{type:"link",size:"small"},on:{click:function(t){return e.handleDesc(a)}}},[e._v(e._s(e.$t("shelfRecord.column.desc")))])]}}])}),t("a-modal",{attrs:{title:e.$t("customizedApp.versionManage.download.app"),visible:e.downloadVisible,width:520,"confirm-loading":e.confirmLoading},on:{cancel:function(t){e.downloadVisible=!1}}},[t("section",{staticClass:"download-content"},[t("div",{staticClass:"qrcode-image-wrap"},[t("qr-code",{attrs:{text:e.downloadUrl,options:{margin:0}}})],1),t("h4",[e._v(e._s(e.appName))]),t("div",{staticClass:"flex x-space-between version-text"},[t("p",[e._v(e._s(e.pkgName[e.type].name))]),t("p",[e._v(e._s(e.$t("customizedApp.versionManage.column.version"))+":"+e._s(e.downloadData.version))])]),t("p",{staticClass:"detail-text"},[e._v(e._s(e.$t("customizedApp.versionManage.download.detail1")))]),t("p",{staticClass:"detail-text"},[e._v(e._s(e.$t("customizedApp.versionManage.download.detail2")))])]),t("template",{slot:"footer"},[t("a-button",{key:"cancel",on:{click:function(t){e.downloadVisible=!1}}},[e._v(e._s(e.$t("optionalConfig.doc.close")))])],1)],2),t("a-modal",{attrs:{title:e.$t("shelfRecord.change.record"),width:500,visible:e.recordVisible,"confirm-loading":e.confirmLoading},on:{ok:e.handleRecordOk,cancel:function(t){e.recordVisible=!1}}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form-model",{ref:"recordForm",staticClass:"regular-form",attrs:{model:e.recordForm,rules:e.recordRules,"label-col":{span:6},"wrapper-col":{span:15}}},[t("a-form-model-item",{attrs:{label:e.$t("shelfRecord.appName"),prop:"launchMarketCodes"}},[t("a-select",{attrs:{mode:"multiple",placeholder:e.$t("shelfRecord.placeholder.appName"),options:e.launchMarketOptions},model:{value:e.recordForm.launchMarketCodes,callback:function(t){e.$set(e.recordForm,"launchMarketCodes",t)},expression:"recordForm.launchMarketCodes"}})],1)],1)],1)],1),t("a-modal",{attrs:{title:e.$t("shelfRecord.column.desc"),width:500,visible:e.descVisible,"confirm-loading":e.confirmLoading},on:{ok:e.handleDescOk,cancel:function(t){e.descVisible=!1}}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form-model",{ref:"descForm",staticClass:"regular-form",attrs:{model:e.descForm,rules:e.descRules,"label-col":{span:6},"wrapper-col":{span:15}}},[t("a-form-model-item",{attrs:{label:e.$t("shelfRecord.column.version"),prop:"version"}},[e._v(" "+e._s(e.descForm.version)+" ")]),t("a-form-model-item",{attrs:{label:e.$t("shelfRecord.column.desc"),prop:"desc"}},[t("a-textarea",{attrs:{placeholder:e.$t("shelfRecord.placeholder.desc"),"auto-size":{minRows:3,maxRows:5}},model:{value:e.descForm.description,callback:function(t){e.$set(e.descForm,"description",t)},expression:"descForm.description"}})],1)],1)],1)],1)],1)},r=[],o=a("ade3"),c=a("c7eb"),i=a("1da1"),s=(a("a9e3"),a("99af"),a("4de4"),a("d3b7"),a("caad"),a("2532"),a("159b"),a("15ff")),d=a("4d70"),l=a("ca00"),u=Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])({components:{},props:{type:{type:Number,default:1},appId:{type:String,default:""},appKey:{type:String,default:""},appName:{type:String,default:""},version:{type:String,default:""}}},"components",{QrCode:d["a"]}),"data",(function(){var e=this;return{pagination:{showSizeChanger:!0,current:1,pageSize:10,total:0,showTotal:function(t,a){return e.$t("public.pagination.total")+":".concat(t)+e.$t("public.pagination.current")+":".concat(a[0],"-").concat(a[1])}},columns:[{title:this.$t("shelfRecord.column.version"),dataIndex:"version",scopedSlots:{customRender:"version"}},{title:this.$t("shelfRecord.column.updateTime"),dataIndex:"updatedAt",scopedSlots:{customRender:"updatedAt"}},{title:this.$t("shelfRecord.column.desc"),dataIndex:"description",ellipsis:!0,width:"30%"},{title:this.$t("shelfRecord.column.record"),dataIndex:"launchMarkets",scopedSlots:{customRender:"launchMarkets"}},{title:this.$t("public.action"),key:"action",align:"center",width:"300px",scopedSlots:{customRender:"action"}}],dataSource:[],loading:!1,recordVisible:!1,confirmLoading:!1,recordForm:{},recordRules:{launchMarketCodes:[{required:!0,message:this.$t("shelfRecord.placeholder.appName"),trigger:"change"}]},appList:[],descVisible:!1,descForm:{},descRules:{version:[{required:!0,message:"",trigger:"change"}],description:[{required:!0,message:this.$t("shelfRecord.placeholder.desc"),trigger:"blur"}]},downloadVisible:!1,downloadUrl:"",downloadData:"",pkgName:{1:{type:"ipa",accept:".ipa",name:this.$t("customizedApp.versionManage.tab.label.iosVersion")},2:{type:"apk",accept:".apk",name:this.$t("customizedApp.versionManage.tab.label.android1")},3:{type:"aab",accept:".aab",name:this.$t("customizedApp.versionManage.tab.label.android2")}},launchMarketLimit:{1:["1"],2:["3","4","5","6","7"],3:["2","8","9"]}}})),"created",(function(){this.query()})),"watch",{appId:function(){this.query()}}),"computed",{launchMarketOptions:function(){var e=this;return this.$DictList("release_market").filter((function(t){return e.launchMarketLimit[e.type].includes(t.value)}))}}),"methods",{query:function(){var e=this;return Object(i["a"])(Object(c["a"])().mark((function t(){var a;return Object(c["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["f"])({pageNum:e.pagination.current,pageSize:e.pagination.pageSize,query:{appId:e.appId,os:e.type,status:1}});case 2:if(a=t.sent,0===a.code){t.next=5;break}return t.abrupt("return");case 5:e.dataSource=a.data.list,e.pagination.total=a.data.total;case 7:case"end":return t.stop()}}),t)})))()},onChangePagination:function(e){this.pagination.current=e.current,this.pagination.pageSize=e.pageSize,this.query()},handleDownload:function(e){var t=this;return Object(i["a"])(Object(c["a"])().mark((function a(){var n;return Object(c["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.downloadData=e,a.next=3,Object(s["e"])({appId:t.appId,version:e.version,os:t.os});case 3:if(n=a.sent,0===n.code){a.next=6;break}return a.abrupt("return");case 6:t.downloadUrl=n.data||"",t.downloadVisible=!0;case 8:case"end":return a.stop()}}),a)})))()},handleChangeRecord:function(e){var t;null===(t=this.$refs.recordForm)||void 0===t||t.resetFields(),this.recordVisible=!0,this.recordForm=Object(l["d"])(e),e.launchMarkets&&this.$set(this.recordForm,"launchMarketCodes",e.launchMarkets.map((function(e){return e.code})))},handleDesc:function(e){var t;null===(t=this.$refs.descForm)||void 0===t||t.resetFields(),this.descVisible=!0,this.descForm=Object(l["d"])(e)},handleRecordOk:function(){var e=this;return Object(i["a"])(Object(c["a"])().mark((function t(){return Object(c["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.recordForm.validate(function(){var t=Object(i["a"])(Object(c["a"])().mark((function t(a){var n,r;return Object(c["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return n={id:e.recordForm.id,launchMarkets:[]},e.recordForm.launchMarketCodes.forEach((function(t){var a=e.$DictList("release_market");a.forEach((function(e){e.value==t&&n.launchMarkets.push({code:e.value,name:e.label})}))})),t.next=6,Object(s["c"])(n);case 6:if(r=t.sent,0===r.code){t.next=9;break}return t.abrupt("return");case 9:e.$message.info(e.$t("public.save.ok")),e.recordVisible=!1,e.query();case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},handleDescOk:function(){var e=this;this.$refs.descForm.validate(function(){var t=Object(i["a"])(Object(c["a"])().mark((function t(a){var n,r;return Object(c["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return n={id:e.descForm.id,description:e.descForm.description},t.next=5,Object(s["d"])(n);case 5:if(r=t.sent,0===r.code){t.next=8;break}return t.abrupt("return");case 8:e.$message.info(e.$t("public.save.ok")),e.descVisible=!1,e.query();case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}),p=u,m=(a("fe50"),a("2877")),f=Object(m["a"])(p,n,r,!1,null,"c9d42bf0",null);t["default"]=f.exports},ed8c:function(e,t,a){},fe50:function(e,t,a){"use strict";a("ed8c")}}]);