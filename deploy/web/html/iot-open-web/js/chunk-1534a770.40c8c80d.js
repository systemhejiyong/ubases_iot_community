(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1534a770","chunk-2d0e920e"],{6157:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.$t("release.detail.title"),width:900,"confirm-loading":e.confirmLoading,visible:e.visible},on:{cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("div",{staticClass:"details"},[t("a-descriptions",{attrs:{size:"small",column:3}},[t("a-descriptions-item",{attrs:{label:e.$t("release.detail.label.name")}},[e._v(" "+e._s(e.detail.productName)+" ")]),t("a-descriptions-item",{attrs:{label:e.$t("release.detail.label.firmwareName")}},[e._v(" "+e._s(e.detail.firmwareName)+" ")]),t("a-descriptions-item",{attrs:{label:e.$t("release.detail.label.firmwareVersion")}},[e._v(" "+e._s(e.detail.version)+" ")]),t("a-descriptions-item",{attrs:{label:e.$t("release.detail.label.releaseType")}},[e._v(" "+e._s(e.detail.releaseModeName)+" ")]),t("a-descriptions-item",{attrs:{label:e.$t("release.detail.label.releaseDetail")}},[e._v(" "+e._s(e.detail.releaseDesc)+" ")]),t("a-descriptions-item",{attrs:{label:e.$t("release.detail.label.operTime")}},[e._v(" "+e._s(e.detail.operTime)+" ")]),t("a-descriptions-item",{attrs:{label:e.$t("release.detail.label.deviceCount")}},[e._v(" "+e._s(e.detail.total)+" ")]),t("a-descriptions-item",{attrs:{label:e.$t("release.detail.label.upgraded")}},[e._v(" "+e._s(e.detail.successTotal+e.detail.failTotal)+"（"+e._s(e.$t("release.record.success"))+e._s(e.detail.successTotal)+"，"+e._s(e.$t("release.record.error"))+e._s(e.detail.failTotal)+"） ")])],1)],1),t("div",{staticClass:"table-page-search-wrapper",staticStyle:{background:"#FFFFFF",padding:"0"}},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:10}},[t("a-col",{attrs:{md:4,sm:24}},[t("a-form-item",[t("a-input",{attrs:{placeholder:e.$t("release.detail.column.deviceId"),allowClear:!0},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.query.apply(null,arguments)}},model:{value:e.queryParam.deviceId,callback:function(t){e.$set(e.queryParam,"deviceId",t)},expression:"queryParam.deviceId"}})],1)],1),t("a-col",{attrs:{md:4,sm:24}},[t("a-form-item",[t("a-select",{attrs:{placeholder:e.$t("release.detail.column.isUpgrade"),"default-value":"",options:e.$DictList("ota_upgrade_status"),allowClear:!0},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.query.apply(null,arguments)}},model:{value:e.queryParam.status,callback:function(t){e.$set(e.queryParam,"status",t)},expression:"queryParam.status"}})],1)],1),t("a-col",{attrs:{md:4,sm:24}},[t("a-form-item",[t("a-select",{attrs:{placeholder:e.$t("release.detail.column.upgradeResult"),"default-value":"",options:e.$DictList("ota_upgrade_result"),allowClear:!0},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.query.apply(null,arguments)}},model:{value:e.queryParam.result,callback:function(t){e.$set(e.queryParam,"result",t)},expression:"queryParam.result"}})],1)],1),t("a-col",{attrs:{md:4,sm:24}},[t("a-form-item",[t("a-select",{attrs:{optionFilterProp:"label",placeholder:e.$t("release.detail.column.area")},model:{value:e.queryParam.area,callback:function(t){e.$set(e.queryParam,"area",t)},expression:"queryParam.area"}},e._l(e.areaOptions,(function(a){return t("a-select-option",{key:a.key,attrs:{value:a.value,label:a.key}},[e._v(" "+e._s(a.label)+" ")])})),1)],1)],1),t("a-col",{attrs:{md:4,sm:24}},[t("span",{staticClass:"table-page-search-submitButtons"},[t("a-space",{attrs:{size:10}},[t("a-button",{attrs:{type:"primary"},on:{click:e.query}},[e._v(" "+e._s(e.$t("public.search"))+" ")]),t("a-button",{staticClass:"regular-button",on:{click:e.reset}},[e._v(" "+e._s(e.$t("public.reset"))+" ")])],1)],1)])],1)],1)],1),t("a-table",{attrs:{size:"small",rowKey:"id","data-source":e.dataSource,columns:e.columns,pagination:e.pagination},on:{change:e.onChangePagination},scopedSlots:e._u([{key:"status",fn:function(t){return[e._v(" "+e._s(e.$DictName("ota_upgrade_status",t))+" ")]}}])})],1),t("section",{staticClass:"ant-modal-footer",attrs:{slot:"footer"},slot:"footer"},[t("a-button",{attrs:{type:"primary"},on:{click:e.handleCancel}},[e._v(e._s(e.$t("public.close.text")))])],1)],1)},n=[],i=a("c7eb"),l=a("5530"),o=a("1da1"),s=(a("99af"),a("d81d"),a("8be3")),u={name:"releaseDetail",props:{visible:{type:Boolean,default:!1},detailId:{type:String,default:""},productId:{type:String,default:""},productKey:{type:String,default:""}},data:function(){var e=this;return{pagination:{showSizeChanger:!0,current:1,pageSize:10,total:0,showTotal:function(t,a){return e.$t("public.pagination.total")+":".concat(t)+e.$t("public.pagination.current")+":".concat(a[0],"-").concat(a[1])}},queryParam:{query:{}},columns:[{title:this.$t("release.detail.column.deviceId"),dataIndex:"deviceId"},{dataIndex:"status",title:this.$t("release.detail.column.isUpgrade"),scopedSlots:{customRender:"status"}},{dataIndex:"result",title:this.$t("release.detail.column.upgradeResult")},{dataIndex:"areaName",title:this.$t("release.detail.column.area")}],dataSource:[],areaOptions:[],confirmLoading:!1,detail:{successTotal:0,failTotal:0}}},watch:{visible:function(e){e&&(this.getRecord(),this.getAreaList())}},mounted:function(){},methods:{getRecord:function(e){var t=this;return Object(o["a"])(Object(i["a"])().mark((function a(){var r,n,o,u,c;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.confirmLoading=!0,a.next=3,Object(s["h"])(t.detailId,Object(l["a"])({page:t.pagination.current,limit:t.pagination.pageSize},e));case 3:if(r=a.sent,t.confirmLoading=!1,0===r.code){a.next=7;break}return a.abrupt("return");case 7:n=Object(l["a"])({},r.data),o=n.failTotal,u=n.successTotal,c=n.total,t.detail=Object(l["a"])(Object(l["a"])({},r.data.details),{},{failTotal:o,successTotal:u,total:c}),t.dataSource=r.data.deviceList,t.pagination.total=r.data.total;case 11:case"end":return a.stop()}}),a)})))()},query:function(){this.queryParam.page=1,this.queryParam.limit=10,this.getRecord(this.queryParam)},onChangePagination:function(e){this.pagination.current=e.current,this.pagination.pageSize=e.pageSize,this.getRecord(this.queryParam)},handleCancel:function(){this.$emit("handleCancel")},getAreaList:function(){var e=this;return Object(o["a"])(Object(i["a"])().mark((function t(){var a,r;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["j"])({productKey:e.productKey,productId:e.productId});case 2:if(r=t.sent,0===r.code){t.next=5;break}return t.abrupt("return");case 5:e.areaOptions=(null===(a=r.data)||void 0===a?void 0:a.map((function(e){return{value:e.Code,label:e.Name,key:e.Name}})))||[];case 6:case"end":return t.stop()}}),t)})))()},reset:function(){this.queryParam={page:1,limit:10,query:{}},this.getRecord(this.queryParam)}}},c=u,d=(a("de5a"),a("2877")),p=Object(d["a"])(c,r,n,!1,null,"f2d8eb5e",null);t["default"]=p.exports},"8be3":function(e,t,a){"use strict";a.d(t,"e",(function(){return n})),a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return l})),a.d(t,"b",(function(){return o})),a.d(t,"i",(function(){return s})),a.d(t,"l",(function(){return u})),a.d(t,"m",(function(){return c})),a.d(t,"f",(function(){return d})),a.d(t,"d",(function(){return p})),a.d(t,"g",(function(){return m})),a.d(t,"k",(function(){return f})),a.d(t,"j",(function(){return b})),a.d(t,"h",(function(){return v}));var r=a("b775");function n(e){return Object(r["b"])({url:"/v1/platform/web/open/firmware/otaList",method:"post",data:e})}function i(e){return Object(r["b"])({url:"/v1/platform/web/open/firmware/otaAdd",method:"post",data:e})}function l(e){return Object(r["b"])({url:"/v1/platform/web/open/firmware/otaEdit",method:"post",data:e})}function o(e){return Object(r["b"])({url:"/v1/platform/web/open/firmware/otaDelete",method:"post",data:e})}function s(e){return Object(r["b"])({url:"/v1/platform/web/open/firmware/releaseRecord",method:"post",data:e})}function u(e){return Object(r["b"])({url:"/v1/platform/web/open/firmware/otaRelease",method:"post",data:e})}function c(e){return Object(r["b"])({url:"/v1/platform/web/open/firmware/otaStop",method:"post",data:e})}function d(e){return Object(r["b"])({url:"/v1/platform/web/open/product/firmwareTypeList",method:"get",params:e})}function p(e){return Object(r["b"])({url:"/v1/platform/web/open/product/firmwareList",method:"get",params:e})}function m(e){return Object(r["b"])({url:"/v1/platform/web/open/product/firmwareVersionList",method:"get",params:e})}function f(e){return Object(r["b"])({url:"/v1/platform/web/open/firmware/upgradableVersions",method:"get",params:e})}function b(e){return Object(r["b"])({url:"/v1/platform/web/open/firmware/upgradableAreas",method:"get",params:e})}function v(e,t){return Object(r["b"])({url:"/v1/platform/web/open/firmware/otaResult/"+e,method:"get",timeout:6e4,params:t})}},"8f2f":function(e,t,a){},de5a:function(e,t,a){"use strict";a("8f2f")}}]);