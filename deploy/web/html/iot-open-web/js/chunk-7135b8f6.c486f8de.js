(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7135b8f6"],{"0b17":function(e,t,n){},"0db0":function(e,t,n){"use strict";n("8eb2")},"1ff3":function(e,t,n){"use strict";n.r(t);n("4e82");var a=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.$t("helpCenter.setDoc.title"),width:680,visible:e.visible,"confirm-loading":e.confirmLoading},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form-model",{ref:"ruleForm",staticClass:"regular-form",attrs:{model:e.form,rules:e.rules,"label-col":{span:6},"wrapper-col":{span:15}}},[t("a-form-model-item",{attrs:{label:e.$t("helpCenter.setDoc.select.catalog"),prop:"dirId"}},[t("a-row",{attrs:{gutter:10}},[t("a-col",{attrs:{md:12}},[t("a-select",{attrs:{options:e.parentMenuOptions,placeholder:e.$t("helpCenter.setDoc.selectLevel1.directory")},on:{change:e.changeParentMenu},model:{value:e.form.parentId,callback:function(t){e.$set(e.form,"parentId",t)},expression:"form.parentId"}})],1),t("a-col",{attrs:{md:12}},[t("a-select",{attrs:{options:e.childMenuOptions,placeholder:e.$t("helpCenter.setDoc.selectLevel2.directory")},model:{value:e.form.dirId,callback:function(t){e.$set(e.form,"dirId",t)},expression:"form.dirId"}})],1)],1)],1),t("a-form-model-item",{ref:"name",attrs:{label:e.$t("helpCenter.setDoc.label.sort"),prop:"sort"}},[t("a-input-number",{staticClass:"sort-input",attrs:{placeholder:e.$t("helpCenter.setDoc.placeholder.sort"),min:0,max:1e3,precision:0},model:{value:e.form.sort,callback:function(t){e.$set(e.form,"sort",t)},expression:"form.sort"}})],1),t("a-form-model-item",{attrs:{label:e.$t("helpCenter.setDoc.label.isEnable"),prop:"isEnable"}},[t("a-radio-group",{attrs:{options:e.$DictList("is_doc_enable")},model:{value:e.form.isEnable,callback:function(t){e.$set(e.form,"isEnable",t)},expression:"form.isEnable"}})],1),t("a-form-model-item",{attrs:{label:e.$t("helpCenter.setDoc.label.isNormal"),prop:"isNormal"}},[t("a-radio-group",{attrs:{options:e.$DictList("yes_no")},model:{value:e.form.isNormal,callback:function(t){e.$set(e.form,"isNormal",t)},expression:"form.isNormal"}})],1)],1)],1)],1)},i=[],r=n("c7eb"),s=n("5530"),l=n("1da1"),o=(n("d81d"),n("4de4"),n("d3b7"),n("b9fe")),c={name:"CreateHelpDoc",props:{visible:{type:Boolean,default:!1},setingId:{type:String,default:""},menuTree:{type:Array,default:[]},parentId:{type:String,default:""}},data:function(){return{confirmLoading:!1,form:{},rules:{dirId:[{required:!0,message:this.$t("helpCenter.setDoc.rules.dirId"),trigger:"change"}],sort:[{required:!0,message:this.$t("helpCenter.setDoc.rules.sort"),trigger:"blur"}],isEnable:[{required:!0,message:this.$t("helpCenter.setDoc.rules.isEnable"),trigger:"change"}],isNormal:[{required:!0,message:this.$t("helpCenter.setDoc.rules.isNormal"),trigger:"change"}]},parentMenuOptions:[],childMenuOptions:[]}},watch:{visible:function(e){e&&this.getEntrySeting()}},mounted:function(){},methods:{getEntrySeting:function(){var e=this;return Object(l["a"])(Object(r["a"])().mark((function t(){var n,a,i,l,c;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["o"])({setingId:e.setingId});case 2:if(i=t.sent,0===i.code){t.next=5;break}return t.abrupt("return");case 5:l=e.parentId,c=null===(n=i.data)||void 0===n?void 0:n.dirId,e.parentMenuOptions=e.menuTree.map((function(e){return{label:e.docDirName,value:e.id}}))||[],e.childMenuOptions=(null===(a=e.menuTree.filter((function(e){return e.id===l})))||void 0===a||null===(a=a.pop())||void 0===a?void 0:a.children.map((function(e){return{label:e.docDirName,value:e.id}})))||[],e.form=Object(s["a"])(Object(s["a"])({},i.data),{},{parentId:l,dirId:c});case 10:case"end":return t.stop()}}),t)})))()},changeParentMenu:function(e){var t;this.childMenuOptions=(null===(t=this.menuTree.filter((function(t){return t.id===e})))||void 0===t||null===(t=t.pop())||void 0===t||null===(t=t.children)||void 0===t?void 0:t.map((function(e){return{label:e.docDirName,value:e.id}})))||[],this.form.dirId=""},handleOk:function(){var e=this;this.$refs.ruleForm.validate(function(){var t=Object(l["a"])(Object(r["a"])().mark((function t(n){var a,i;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:return e.confirmLoading=!0,t.next=5,Object(o["v"])(e.form);case 5:if(i=t.sent,e.confirmLoading=!1,0===i.code){t.next=9;break}return t.abrupt("return");case 9:e.$emit("handleOk"),e.form={},null===(a=e.$refs.ruleForm)||void 0===a||a.resetFields();case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},handleCancel:function(){var e;this.$emit("handleCancel"),this.form={},null===(e=this.$refs.ruleForm)||void 0===e||e.resetFields()}}},u=c,d=(n("0db0"),n("2877")),p=Object(d["a"])(u,a,i,!1,null,"8bc84be4",null);t["default"]=p.exports},"264d":function(e,t,n){},"67ee":function(e,t,n){"use strict";n("0b17")},7136:function(e,t,n){"use strict";n("264d")},"8eb2":function(e,t,n){},9136:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.title,width:840,visible:e.visible,"confirm-loading":e.confirmLoading},on:{cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form-model",{ref:"form",staticClass:"regular-form",attrs:{model:e.form,rules:e.rules}},[t("a-form-model-item",{attrs:{label:e.$t("helpCenter.editDoc.label.lang"),prop:"lang","label-col":{span:4},"wrapper-col":{span:13}}},[t("a-select",{attrs:{placeholder:e.$t("helpCenter.editDoc.placeholder.lang"),options:e.langList},on:{change:e.langChange},model:{value:e.form.lang,callback:function(t){e.$set(e.form,"lang",t)},expression:"form.lang"}})],1),t("a-form-model-item",{attrs:{label:e.$t("helpCenter.editDoc.label.title"),prop:"title","label-col":{span:4},"wrapper-col":{span:13}}},[t("a-input",{attrs:{disabled:e.readOnly,placeholder:e.$t("helpCenter.editDoc.placeholder.title"),maxLength:50},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),t("a-form-model-item",{attrs:{prop:"content",label:e.$t("helpCenter.editDoc.label.content"),"label-col":{span:4},"wrapper-col":{span:18}}},[t("section",{staticClass:"wrap"},[t("quill-editor",{attrs:{value:e.form.content||"",readOnly:e.readOnly},on:{change:e.editorChange}})],1)])],1)],1),t("template",{slot:"footer"},[t("a-button",{key:"cancel",on:{click:e.handleCancel}},[e._v(e._s(e.$t("public.cancel")))]),e.readOnly?e._e():t("a-button",{key:"submit",attrs:{type:"primary"},on:{click:e.handleOk}},[e._v(e._s(e.$t("public.save")))])],1)],2)},i=[],r=n("5530"),s=n("c7eb"),l=n("1da1"),o=n("4056"),c=n("b9fe"),u={name:"EditDoc",props:{visible:{type:Boolean,default:!1},setingId:{type:String,default:""},dirId:{type:String,default:""},readOnly:{type:Boolean,default:!1},title:{type:String,default:""},langList:{type:Array,default:[]},isPublic:{type:Boolean,default:!1}},components:{QuillEditor:o["a"]},data:function(){return{confirmLoading:!1,rules:{lang:[{required:!0,message:this.$t("helpCenter.editDoc.rules.lang"),trigger:"change"}],title:[{required:!0,message:this.$t("helpCenter.editDoc.rules.title"),trigger:"change"}],content:[{required:!0,message:this.$t("helpCenter.editDoc.rules.content"),trigger:"change"},{max:"10000",message:this.$t("helpCenter.editDoc.rules.content.word.limit"),trigger:"change"}]},form:{},currentLang:1}},watch:{visible:function(e){e&&(this.currentLang="zh",this.setingId&&"0"!==this.setingId&&this.getEntryDetail())}},mounted:function(){},methods:{getEntryDetail:function(){var e=this;return Object(l["a"])(Object(s["a"])().mark((function t(){var n,a;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n={setingId:e.setingId,lang:e.currentLang},!e.isPublic){t.next=7;break}return t.next=4,Object(c["s"])(n);case 4:t.t0=t.sent,t.next=10;break;case 7:return t.next=9,Object(c["m"])(n);case 9:t.t0=t.sent;case 10:if(a=t.t0,0===a.code){t.next=13;break}return t.abrupt("return");case 13:e.form=a.data;case 14:case"end":return t.stop()}}),t)})))()},editorChange:function(e){this.$set(this.form,"content",e)},langChange:function(e){this.currentLang=e,this.setingId&&"0"!=this.setingId&&this.getEntryDetail()},handleCancel:function(){var e;this.$emit("cancel"),this.form={},null===(e=this.$refs.form)||void 0===e||e.resetFields()},handleOk:function(){var e=this;this.$refs.form.validate(function(){var t=Object(l["a"])(Object(s["a"])().mark((function t(n){var a,i,l;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:return e.confirmLoading=!0,i=Object(r["a"])(Object(r["a"])({},e.form),{},{setingId:e.setingId,dirId:e.dirId}),t.next=6,Object(c["w"])(i);case 6:if(l=t.sent,e.confirmLoading=!1,0===l.code){t.next=10;break}return t.abrupt("return");case 10:e.$emit("sumit"),e.form={},null===(a=e.$refs.form)||void 0===a||a.resetFields();case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}},d=u,p=(n("67ee"),n("2877")),m=Object(p["a"])(d,a,i,!1,null,"27a8b6ba",null);t["default"]=m.exports},f0d8:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("section",{staticClass:"page-wrap no-padding"},[t("a-page-header",{attrs:{title:e.pubAppName||"".concat(e.appName)+e.$t("helpCenter.docManage.title")},on:{back:function(t){return e.$router.back()}}},[t("icon-font",{style:{fontSize:"24px"},attrs:{slot:"backIcon",type:"icon-back_arrow"},slot:"backIcon"}),t("section",{staticClass:"content-wrap flex"},[t("section",{staticClass:"catalog-wrap"},[t("h3",{staticClass:"title"},[e._v(e._s(e.$t("helpCenter.docManage.catalog")))]),t("catalog",{attrs:{type:e.type,docId:e.docId,langList:e.docLangList},on:{menuChange:e.menuChange,getTreeData:e.getTreeData}})],1),t("section",{staticClass:"table-wrap"},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:10}},[t("a-col",{attrs:{md:4,sm:24}},[t("a-form-item",[t("a-select",{attrs:{placeholder:e.$t("helpCenter.docManage.placeholder.lang"),options:e.langList,allowClear:!0},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.queryList.apply(null,arguments)}},model:{value:e.queryParam.lang,callback:function(t){e.$set(e.queryParam,"lang",t)},expression:"queryParam.lang"}})],1)],1),t("a-col",{attrs:{md:4,sm:24}},[t("a-form-item",[t("a-input",{attrs:{placeholder:e.$t("helpCenter.docManage.placeholder.title"),allowClear:!0},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.queryList.apply(null,arguments)}},model:{value:e.queryParam.title,callback:function(t){e.$set(e.queryParam,"title",t)},expression:"queryParam.title"}})],1)],1),t("a-col",{attrs:{md:4,sm:24}},[t("a-form-item",[t("a-select",{attrs:{placeholder:e.$t("helpCenter.docManage.placeholder.isNormal"),options:e.$DictList("yes_no"),allowClear:!0},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.queryList.apply(null,arguments)}},model:{value:e.queryParam.isNormal,callback:function(t){e.$set(e.queryParam,"isNormal",t)},expression:"queryParam.isNormal"}})],1)],1),t("a-col",{attrs:{md:4,sm:24}},[t("a-form-item",[t("a-select",{attrs:{placeholder:e.$t("helpCenter.docManage.placeholder.isEnable"),options:e.$DictList("is_doc_enable"),allowClear:!0},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.queryList.apply(null,arguments)}},model:{value:e.queryParam.isEnable,callback:function(t){e.$set(e.queryParam,"isEnable",t)},expression:"queryParam.isEnable"}})],1)],1),t("a-col",{attrs:{md:4,sm:24}},[t("span",{staticClass:"table-page-search-submitButtons"},[t("a-space",{attrs:{size:10}},[t("a-button",{attrs:{type:"primary"},on:{click:e.queryList}},[e._v(e._s(e.$t("public.query")))]),t("a-button",{staticClass:"regular-button",on:{click:e.reset}},[e._v(e._s(e.$t("public.reset")))])],1)],1)])],1)],1)],1),t("div",{staticClass:"table-operator"},["edit"==e.type&&e.activeMenuId?t("a-button",{staticClass:"grean-button",attrs:{type:"primary"},on:{click:e.toggleAdd}},[t("icon-font",{style:{fontSize:"18px"},attrs:{type:"icon-add"}}),e._v(" "+e._s(e.$t("public.add"))+" ")],1):e._e()],1),t("a-table",{attrs:{size:"small",rowKey:"setingId","data-source":e.dataSource,columns:e.columns,loading:e.loading,pagination:e.pagination},on:{change:e.onChangePagination},scopedSlots:e._u([{key:"title",fn:function(n){return[t("span",{staticClass:"title tap-pointer",on:{click:function(t){return e.checkDetails(n)}}},[e._v(e._s(n.title))])]}},{key:"isEnable",fn:function(t,n){return[e._v(" "+e._s(e.$DictName("is_doc_enable",n.isEnable))+" ")]}},{key:"updatedAt",fn:function(t,n){return[e._v(" "+e._s(e._f("momentFilter")(n.updatedAt))+" ")]}},{key:"isNormal",fn:function(t,n){return[e._v(" "+e._s(e.$DictName("yes_no",n.isNormal))+" ")]}},{key:"action",fn:function(n){return[t("a-button",{attrs:{type:"link",size:"small"},on:{click:function(t){return e.configDoc(n)}}},[e._v(" "+e._s(e.$t("public.set"))+" ")]),t("a-divider",{attrs:{type:"vertical"}}),t("a-button",{attrs:{type:"link",size:"small"},on:{click:function(t){return e.editDoc(n)}}},[e._v(" "+e._s(e.$t("helpCenter.docManage.edit.doc"))+" ")]),t("a-divider",{attrs:{type:"vertical"}}),t("a-button",{attrs:{type:"link",size:"small"},on:{click:function(t){return e.deleteDoc(n)}}},[e._v(" "+e._s(e.$t("public.delete"))+" ")])]}}])})],1)])],1),t("set-doc",{attrs:{visible:e.setDocVisible,setingId:e.setingIdEdit,menuTree:e.menuTree,parentId:e.activeParentId},on:{handleCancel:e.cancelSet,handleOk:e.sumitSet}}),t("edit-doc",{attrs:{visible:e.editDocVisible,isPublic:"public"==e.type,readOnly:e.isReadOnly,title:e.editTitle,setingId:e.setingIdEdit,dirId:e.activeMenuId,langList:e.langList},on:{cancel:e.cancelEdit,sumit:e.sumitEdit}})],1)},i=[],r=n("5530"),s=n("c7eb"),l=n("1da1"),o=(n("99af"),n("b0c0"),n("a15b"),n("d81d"),n("8577")),c=n("1ff3"),u=n("9136"),d=n("b9fe"),p={components:{Catalog:o["default"],SetDoc:c["default"],EditDoc:u["default"]},data:function(){var e=this;return{queryParam:{lang:"zh"},dataSource:[],columns:[{title:this.$t("public.sort"),dataIndex:"sort",width:"50px"},{title:this.$t("helpCenter.docManage.columns.title"),key:"title",scopedSlots:{customRender:"title"}},{dataIndex:"dirName",title:this.$t("helpCenter.docManage.columns.dirName")},{dataIndex:"isEnable",title:this.$t("helpCenter.docManage.columns.isEnable"),scopedSlots:{customRender:"isEnable"},width:"50px"},{dataIndex:"updatedAt",title:this.$t("helpCenter.docManage.columns.updatedAt"),scopedSlots:{customRender:"updatedAt"}},{dataIndex:"isNormal",title:this.$t("helpCenter.docManage.columns.isNormal"),scopedSlots:{customRender:"isNormal"},width:"80px"}],actionColumn:{title:this.$t("public.action"),key:"action",align:"center",width:"220px",scopedSlots:{customRender:"action"}},loading:!1,setDocVisible:!1,editDocVisible:!1,isReadOnly:!1,editTitle:"",docId:"",appName:"",pubAppName:"",type:"",setingIdEdit:"0",pagination:{showSizeChanger:!0,current:1,pageSize:10,total:0,showTotal:function(t,n){return e.$t("public.pagination.total")+":".concat(t)+e.$t("public.pagination.current")+":".concat(n[0],"-").concat(n[1])}},langList:[],docLangList:[],menuTree:[],activeMenuId:"",activeParentId:""}},created:function(){},mounted:function(){this.docId=this.$route.query.id||"",this.type=this.$route.query.type,"edit"==this.type?(this.columns.push(this.actionColumn),this.appDocDetail(),this.getSupportLangs()):(this.pubAppName=this.$route.query.name||"",this.getPubLangs())},methods:{appDocDetail:function(){var e=this;return Object(l["a"])(Object(s["a"])().mark((function t(){var n,a;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(d["c"])({docId:e.docId});case 2:if(a=t.sent,0===a.code){t.next=5;break}return t.abrupt("return");case 5:e.appName=(null===(n=a.data)||void 0===n||null===(n=n.apps)||void 0===n?void 0:n.map((function(e){return e.appName})).join(","))||"";case 6:case"end":return t.stop()}}),t)})))()},menuChange:function(e){this.activeMenuId=e.dirId,this.activeParentId=e.parentId,this.pagination.current=1,this.queryList()},getTreeData:function(e){this.menuTree=e},reset:function(){this.queryParam={lang:this.queryParam.lang},this.pagination.current=1,this.queryList()},queryList:function(){var e=this;return Object(l["a"])(Object(s["a"])().mark((function t(){var n,a;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.activeParentId){t.next=2;break}return t.abrupt("return");case 2:if(e.loading=!0,n=Object(r["a"])(Object(r["a"])({},e.queryParam),{},{docId:e.docId,dirId:e.activeMenuId||e.activeParentId,pageNum:e.pagination.current,pageSize:e.pagination.pageSize}),"edit"!=e.type){t.next=10;break}return t.next=7,Object(d["n"])(n);case 7:t.t0=t.sent,t.next=13;break;case 10:return t.next=12,Object(d["t"])(n);case 12:t.t0=t.sent;case 13:if(a=t.t0,e.loading=!1,0===a.code){t.next=17;break}return t.abrupt("return");case 17:e.dataSource=a.data.list,e.pagination.total=a.data.total;case 19:case"end":return t.stop()}}),t)})))()},toggleAdd:function(){this.isReadOnly=!1,this.editTitle=this.$t("public.add"),this.setingIdEdit="0",this.editDocVisible=!0},checkDetails:function(e){this.isReadOnly=!0,this.editTitle=this.$t("helpCenter.docManage.problem.detail"),this.setingIdEdit=e.setingId,this.editDocVisible=!0},editDoc:function(e){this.isReadOnly=!1,this.editTitle=this.$t("public.edit"),this.setingIdEdit=e.setingId,this.editDocVisible=!0},configDoc:function(e){this.setingIdEdit=e.setingId,this.setDocVisible=!0},cancelSet:function(){this.setDocVisible=!1},sumitSet:function(){this.setDocVisible=!1,this.queryList()},cancelEdit:function(){this.editDocVisible=!1},sumitEdit:function(){this.editDocVisible=!1,this.queryList()},deleteDoc:function(e){var t=this;this.$ConfirmModal(this,this.$t("helpCenter.docManage.delete.content"),this.$t("helpCenter.docManage.delete.title"),this.$t("public.sumit")).then(Object(l["a"])(Object(s["a"])().mark((function n(){var a;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(d["e"])({setingId:e.setingId});case 2:if(a=n.sent,0===a.code){n.next=5;break}return n.abrupt("return");case 5:t.$message.success(t.$t("public.action.succeed")),t.queryList();case 7:case"end":return n.stop()}}),n)}))))},getSupportLangs:function(){var e=this;return Object(l["a"])(Object(s["a"])().mark((function t(){var n,a;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(d["u"])({docId:e.docId});case 2:if(a=t.sent,0===a.code){t.next=5;break}return t.abrupt("return");case 5:e.docLangList=a.data,e.langList=null===(n=a.data)||void 0===n?void 0:n.map((function(e){return{label:e.langName,value:e.lang}}));case 7:case"end":return t.stop()}}),t)})))()},getPubLangs:function(){var e=this;return Object(l["a"])(Object(s["a"])().mark((function t(){var n,a;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(d["p"])();case 2:if(a=t.sent,0===a.code){t.next=5;break}return t.abrupt("return");case 5:e.docLangList=a.data,e.langList=null===(n=a.data)||void 0===n?void 0:n.map((function(e){return{value:e.lang,label:e.langName}}));case 7:case"end":return t.stop()}}),t)})))()},onChangePagination:function(e){this.pagination.current=e.current,this.pagination.pageSize=e.pageSize,this.queryList()}}},m=p,f=(n("7136"),n("2877")),h=Object(f["a"])(m,a,i,!1,null,"438192c7",null);t["default"]=h.exports}}]);