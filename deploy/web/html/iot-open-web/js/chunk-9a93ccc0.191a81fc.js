(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9a93ccc0"],{6533:function(e,t,a){"use strict";a("a2eb")},a2eb:function(e,t,a){},e706:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("section",{staticClass:"page-wrap"},[t("a-page-header",{attrs:{title:e.$t("device.title")}},[t("section",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:10}},[t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",[t("a-input",{attrs:{placeholder:e.$t("device.placeholder.searchKey"),allowClear:!0},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.query.apply(null,arguments)}},model:{value:e.queryParam.searchKey,callback:function(t){e.$set(e.queryParam,"searchKey",t)},expression:"queryParam.searchKey"}})],1)],1),t("a-col",{attrs:{md:3,sm:24}},[t("a-form-item",[t("a-select",{attrs:{placeholder:e.$t("device.placeholder.isActive"),options:e.$DictList("active_status"),allowClear:!0},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.query.apply(null,arguments)}},model:{value:e.queryParam.query.isActive,callback:function(t){e.$set(e.queryParam.query,"isActive",t)},expression:"queryParam.query.isActive"}})],1)],1),t("a-col",{attrs:{md:3,sm:24}},[t("a-form-item",[t("a-select",{attrs:{placeholder:e.$t("device.placeholder.isOnline"),options:e.$DictList("online_status"),allowClear:!0},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.query.apply(null,arguments)}},model:{value:e.queryParam.query.isOnline,callback:function(t){e.$set(e.queryParam.query,"isOnline",t)},expression:"queryParam.query.isOnline"}})],1)],1),t("a-col",{attrs:{md:3,sm:24}},[t("a-form-item",[t("a-select",{attrs:{placeholder:e.$t("device.placeholder.deviceNature"),options:e.$DictList("device_nature"),allowClear:!0},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.query.apply(null,arguments)}},model:{value:e.queryParam.query.deviceNature,callback:function(t){e.$set(e.queryParam.query,"deviceNature",t)},expression:"queryParam.query.deviceNature"}})],1)],1),t("a-col",{attrs:{xl:6,lg:11,sm:24}},[t("a-form-item",{attrs:{label:e.$t("device.placeholder.aliveTime"),colon:!1}},[t("a-range-picker",{attrs:{separator:"—"},on:{change:e.handleChangeDate},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.query.apply(null,arguments)}},model:{value:e.queryParam.aliveTime,callback:function(t){e.$set(e.queryParam,"aliveTime",t)},expression:"queryParam.aliveTime"}},[t("icon-font",{style:{fontSize:"23px"},attrs:{slot:"suffixIcon",type:"icon-date"},slot:"suffixIcon"})],1)],1)],1),t("a-col",{attrs:{md:4,sm:24}},[t("span",{staticClass:"table-page-search-submitButtons"},[t("a-space",{attrs:{size:10}},[t("a-button",{attrs:{type:"primary"},on:{click:e.query}},[e._v(" "+e._s(e.$t("public.search"))+" ")]),t("a-button",{staticClass:"regular-button",on:{click:e.resetParam}},[e._v(" "+e._s(e.$t("public.reset"))+" ")])],1)],1)])],1)],1)],1),t("section",{staticClass:"table-operator flex y-axis-center x-space-between"},[t("section",{staticClass:"flex"},[t("a-button",{staticClass:"green-border-button",on:{click:e.handleExportVisible}},[t("export-green-icon"),e._v(e._s(e.$t("device.button.exportData")))],1)],1),t("section",{staticClass:"device-count"},[t("span",[e._v(e._s(e.$t("device.count.deviceTotal"))+"："+e._s(e.countData.deviceTotal||0))]),t("span",[e._v(e._s(e.$t("device.count.activeTotal"))+"："+e._s(e.countData.activeTotal||0))]),t("span",[e._v(e._s(e.$t("device.count.onlineTotal"))+"："+e._s(e.countData.onlineTotal||0))])])]),t("a-table",{attrs:{size:"small",rowKey:"did","data-source":e.dataSource,columns:e.columns,loading:e.loading,pagination:e.pagination},on:{change:e.onChangePagination},scopedSlots:e._u([{key:"did",fn:function(a){return[t("p",{domProps:{textContent:e._s(a.deviceName)}}),t("p",{domProps:{textContent:e._s(a.did)}})]}},{key:"activeStatus",fn:function(t,a){return[e._v(" "+e._s(e.$DictName("active_status",a.activeStatus))+" ")]}},{key:"onlineStatus",fn:function(t,a){return[e._v(" "+e._s(e.$DictName("online_status",a.onlineStatus))+" ")]}},{key:"productName",fn:function(a,i){return[t("p",{domProps:{textContent:e._s(i.productName)}}),t("p",{domProps:{textContent:e._s(i.productKey)}})]}},{key:"activatedTime",fn:function(a,i){return[i.activatedTime&&0!=i.activatedTime?t("span",[e._v(" "+e._s(e._f("momentFilter")(i.activatedTime)))]):t("span",[e._v(e._s(e.$t("public.not.available")))])]}},{key:"action",fn:function(a){return[t("a-button",{attrs:{type:"link",size:"small"},on:{click:function(t){return e.$router.push({path:"/product/device/details/index",query:{did:a.did}})}}},[e._v(" "+e._s(e.$t("public.detail.text"))+" ")]),t("a-divider",{attrs:{type:"vertical"}}),t("a-button",{attrs:{type:"link",size:"small"},on:{click:function(t){return e.$router.push({path:"/product/device/log/index",query:{did:a.did,name:a.deviceName,productId:a.productId}})}}},[e._v(" "+e._s(e.$t("device.button.log"))+" ")]),t("a-divider",{attrs:{type:"vertical"}}),t("a-button",{attrs:{type:"link",size:"small"},on:{click:function(t){return e.$router.push({path:"/product/device/malfunction/index",query:{did:a.did,name:a.deviceName}})}}},[e._v(" "+e._s(e.$t("device.btn.malfunction"))+" ")])]}}])}),t("export-data",{attrs:{visible:e.exportVisible},on:{handleClose:e.handleExportVisible}})],1)],1)},n=[],r=a("c7eb"),s=a("5530"),c=a("1da1"),o=(a("99af"),a("aa98")),u=a("04b3"),l=a("7eb3"),d={name:"Device",data:function(){var e=this;return{pagination:{showSizeChanger:!0,current:1,pageSize:10,total:0,showTotal:function(t,a){return e.$t("public.pagination.total")+":".concat(t)+e.$t("public.pagination.current")+":".concat(a[0],"-").concat(a[1])}},queryParam:{page:1,limit:10,query:{}},columns:[{title:this.$t("device.columns.did"),key:"did",scopedSlots:{customRender:"did"}},{dataIndex:"activeStatus",title:this.$t("device.columns.activeStatus"),scopedSlots:{customRender:"activeStatus"}},{dataIndex:"onlineStatus",title:this.$t("device.columns.onlineStatus"),scopedSlots:{customRender:"onlineStatus"}},{dataIndex:"productName",title:this.$t("device.columns.productName"),scopedSlots:{customRender:"productName"}},{dataIndex:"deviceNature",title:this.$t("device.columns.deviceNature")},{dataIndex:"sn",title:this.$t("device.columns.sn")},{dataIndex:"activatedTime",title:this.$t("device.columns.activatedTime"),scopedSlots:{customRender:"activatedTime"}},{title:this.$t("public.action"),key:"action",align:"left",width:"220px",scopedSlots:{customRender:"action"}}],dataSource:[],loading:!1,exportVisible:!1,countData:{}}},components:{DateIcon:u["j"],ExportData:l["default"],ExportGreenIcon:u["r"]},created:function(){this.$route.meta.isBack||(Object.assign(this.$data,this.$options.data.call(this)),this.queryList())},beforeRouteEnter:function(e,t,a){e.meta.isBack="/product/device/details/index"===t.path||"/product/device/log/index"===t.path||"/product/device/malfunction/index"===t.path||"/dashboard/index"===t.path,a()},activated:function(){this.$route.meta.isBack&&(this.$route.meta.isBack=!1,this.queryList())},methods:{queryList:function(){var e=this;return Object(c["a"])(Object(r["a"])().mark((function t(){var a,i,n,c,u,l,d;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,a=Object(s["a"])({},e.queryParam),i=a.page,n=a.limit,c=a.query,u=a.searchKey,l=void 0===u?"":u,t.next=4,Object(o["h"])({page:i,limit:n,query:c,searchKey:l});case 4:if(d=t.sent,e.loading=!1,0===d.code){t.next=8;break}return t.abrupt("return");case 8:e.dataSource=d.data.list,e.pagination.total=d.data.total,e.getDeviceCount();case 11:case"end":return t.stop()}}),t)})))()},getDeviceCount:function(){var e=this;return Object(c["a"])(Object(r["a"])().mark((function t(){var a,i,n,c,u;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=Object(s["a"])({},e.queryParam),i=a.query,n=a.searchKey,c=void 0===n?"":n,t.next=3,Object(o["f"])({query:i,searchKey:c});case 3:if(u=t.sent,0===u.code){t.next=6;break}return t.abrupt("return");case 6:e.countData=u.data;case 7:case"end":return t.stop()}}),t)})))()},query:function(){this.queryParam.page=1,this.pagination.current=1,this.queryList()},resetParam:function(){this.pagination.current=1,this.queryParam={page:1,limit:this.queryParam.limit,query:{}},this.queryList()},onChangePagination:function(e){this.queryParam.page=e.current,this.queryParam.limit=e.pageSize,this.pagination.current=e.current,this.pagination.pageSize=e.pageSize,this.queryList()},handleChangeDate:function(e){e&&e.length>0?(this.queryParam.query["startTime"]=this.$TransformTimestamp(e[0]),this.queryParam.query["endTime"]=this.$TransformTimestamp(e[1])):(this.queryParam.query["startTime"]="",this.queryParam.query["endTime"]="")},handleExportVisible:function(){this.exportVisible=!this.exportVisible}}},p=d,m=(a("6533"),a("2877")),y=Object(m["a"])(p,i,n,!1,null,"66ecb251",null);t["default"]=y.exports}}]);