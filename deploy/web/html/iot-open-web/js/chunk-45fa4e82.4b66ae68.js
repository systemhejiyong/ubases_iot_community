(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-45fa4e82"],{"201e":function(e,a,r){"use strict";r("5fb0")},"5fb0":function(e,a,r){},a3ce:function(e,a,r){"use strict";r.r(a);r("b0c0");var t=function(){var e=this,a=e._self._c;return a("a-modal",{attrs:{title:e.$t("firmware.putaway-version"),width:680,visible:e.visible,"confirm-loading":e.confirmLoading},on:{ok:e.handleOk,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("p",{staticClass:"warning-text"},[e._v(e._s(e.$t("firmware.publish.warning.text")))]),a("a-form-model",{ref:"ruleForm",staticClass:"regular-form",attrs:{model:e.firmwareVersionData,rules:e.rules,hideRequiredMark:!0,"label-col":{span:6},"wrapper-col":{span:18}}},[a("a-form-model-item",{attrs:{label:e.$t("firmware.publish.label.name")}},[e._v(" "+e._s(e.data.name)+" ")]),a("a-form-model-item",{attrs:{label:e.$t("firmware.publish.label.id")}},[e._v(" "+e._s(e.data.id)+" ")]),a("a-form-model-item",{attrs:{label:e.$t("firmware.publish.label.flag")}},[e._v(" "+e._s(e.data.flag)+" ")]),a("a-form-model-item",{attrs:{label:e.$t("firmware.publish.label.type")}},[e._v(" "+e._s(e.$DictName("firmware_type",e.data.type))+" ")]),a("a-form-model-item",{attrs:{label:e.$t("firmware.publish.label.upgradeChannel")}},[e._v(" "+e._s(e.data.upgradeChannel)+" ")]),a("a-form-model-item",{attrs:{label:e.$t("firmware.publish.label.flashSize")}},[e._v(" "+e._s(e.data.flashSize)+" ")]),a("a-form-model-item",{attrs:{label:e.$t("firmware.publish.label.upgradeOvertime")}},[e._v(" "+e._s(e.data.upgradeOvertime)+" ")]),a("a-form-model-item",{attrs:{label:e.$t("firmware.publish.label.version"),prop:"version"}},[e._v(" "+e._s(e.firmwareVersionData.version)+" ")]),a("a-form-model-item",{attrs:{label:e.$t("firmware.publish.label.desc"),prop:"desc"}},[e._v(" "+e._s(e.firmwareVersionData.desc)+" ")]),a("a-form-model-item",{attrs:{label:e.$t("firmware.publish.label.upgradeMode"),prop:"upgradeMode"}},[a("a-radio-group",{attrs:{options:e.$DictList("upgrade_pkg_mode")},model:{value:e.firmwareVersionData.upgradeMode,callback:function(a){e.$set(e.firmwareVersionData,"upgradeMode",a)},expression:"firmwareVersionData.upgradeMode"}})],1),a("a-form-model-item",{attrs:{label:e.$t("firmware.publish.label.upgradeFilePath"),prop:"upgradeFilePath"}},[a("section",{staticClass:"flex y-axis-center"},[a("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"},{name:"model",rawName:"v-model",value:e.firmwareVersionData.upgradeFileName,expression:"firmwareVersionData.upgradeFileName"}],domProps:{value:e.firmwareVersionData.upgradeFileName},on:{input:function(a){a.target.composing||e.$set(e.firmwareVersionData,"upgradeFileName",a.target.value)}}}),a("span",{staticClass:"file-name",domProps:{textContent:e._s(e.firmwareVersionData.upgradeFileName||"")}}),a("a-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],model:{value:e.firmwareVersionData.upgradeFilePath,callback:function(a){e.$set(e.firmwareVersionData,"upgradeFilePath",a)},expression:"firmwareVersionData.upgradeFilePath"}}),a("upload-button",{attrs:{type:"file",accept:".bin",buttonText:e.$t("public.reupload"),warningFileType:"bin",catalogName:"firmware",limitSize:10,showFile:!1,suffixValid:!0},on:{uploaded:function(a){return e.uploaded(a,"upgradeFilePath","upgradeFileName","upgradeFileSize","upgradeFileKey")}}})],1)]),a("a-form-model-item",{attrs:{label:e.$t("firmware.publish.label.prodFilePath"),prop:"prodFilePath"}},[a("section",{staticClass:"flex y-axis-center"},[a("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"},{name:"model",rawName:"v-model",value:e.firmwareVersionData.prodFileName,expression:"firmwareVersionData.prodFileName"}],domProps:{value:e.firmwareVersionData.prodFileName},on:{input:function(a){a.target.composing||e.$set(e.firmwareVersionData,"prodFileName",a.target.value)}}}),a("span",{staticClass:"file-name",domProps:{textContent:e._s(e.firmwareVersionData.prodFileName||"")}}),a("a-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],model:{value:e.firmwareVersionData.prodFilePath,callback:function(a){e.$set(e.firmwareVersionData,"prodFilePath",a)},expression:"firmwareVersionData.prodFilePath"}}),a("upload-button",{attrs:{type:"file",accept:".bin",buttonText:e.firmwareVersionData.prodFilePath?e.$t("public.reupload"):e.$t("firmware.version.label.upload"),warningFileType:"bin",catalogName:"firmware",limitSize:10,showFile:!1,suffixValid:!0},on:{uploaded:function(a){return e.uploaded(a,"prodFilePath","prodFileName","prodFileSize","prodFileKey")}}})],1)]),a("a-form-model-item",{attrs:{label:e.$t("firmware.publish.label.isMust"),prop:"isMust"}},[a("a-radio-group",{attrs:{options:e.$DictList("yes_no")},model:{value:e.firmwareVersionData.isMust,callback:function(a){e.$set(e.firmwareVersionData,"isMust",a)},expression:"firmwareVersionData.isMust"}})],1)],1)],1)],1)},i=[],s=r("5530"),l=r("c7eb"),o=r("1da1"),n=r("b5af"),m=r("2a50"),u={props:{visible:{type:Boolean,default:!1},firmwareVersionData:{type:Object,default:function(){}},firmwareId:{type:String,default:""}},components:{UploadButton:m["a"]},data:function(){return{stepIndex:0,confirmLoading:!1,form:{},data:{},rules:{prodFilePath:[{required:!0,message:this.$t("firmware.upgradeFirmware.valid"),trigger:""}]}}},watch:{firmwareId:function(e){e&&this.getFirmwareDetail()}},mounted:function(){this.firmwareId&&this.getFirmwareDetail()},methods:{getFirmwareDetail:function(){var e=this;return Object(o["a"])(Object(l["a"])().mark((function a(){var r;return Object(l["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.confirmLoading=!0,a.next=3,Object(n["g"])(e.firmwareId);case 3:if(r=a.sent,e.confirmLoading=!1,0===r.code){a.next=7;break}return a.abrupt("return");case 7:e.data=r.data;case 8:case"end":return a.stop()}}),a)})))()},handleOk:function(){var e=this;this.$refs.ruleForm.validate(function(){var a=Object(o["a"])(Object(l["a"])().mark((function a(r){var t,i;return Object(l["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r){a.next=2;break}return a.abrupt("return");case 2:return e.confirmLoading=!0,a.next=5,Object(n["j"])(Object(s["a"])({},e.firmwareVersionData));case 5:if(i=a.sent,e.confirmLoading=!1,0===i.code){a.next=9;break}return a.abrupt("return");case 9:e.$emit("handleOk"),null===(t=e.$refs.ruleForm)||void 0===t||t.resetFields();case 11:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())},handleCancel:function(){var e;this.$emit("handleCancel"),null===(e=this.$refs.ruleForm)||void 0===e||e.resetFields()},uploaded:function(e,a,r,t,i){this.$set(this.firmwareVersionData,a,e.fullPath),this.$set(this.firmwareVersionData,r,e.name),this.$set(this.firmwareVersionData,t,e.size),this.$set(this.firmwareVersionData,i,e.key),this.$refs["ruleForm"].clearValidate([a])}}},d=u,p=(r("201e"),r("2877")),f=Object(p["a"])(d,t,i,!1,null,"235b990e",null);a["default"]=f.exports}}]);