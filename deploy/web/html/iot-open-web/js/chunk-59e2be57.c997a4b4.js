(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-59e2be57"],{"17af":function(t,e,n){"use strict";n("ecf8")},4270:function(t,e,n){"use strict";n.r(e);n("b0c0");var i=function(){var t=this,e=t._self._c;return e("a-modal",{attrs:{title:t.$t("setting.add.Standard.function.title"),width:750,visible:t.visible,"confirm-loading":t.confirmLoading},on:{ok:t.handleOk,cancel:t.handleCancel}},[e("a-spin",{attrs:{spinning:t.confirmLoading}},[e("section",{staticClass:"content flex"},[e("section",{staticClass:"function-list-wrap"},[e("section",{staticClass:"header flex y-axis-center x-space-between"},[e("span",[t._v(t._s(t.$t("setting.add.Standard.function.select")))]),e("a-button",{attrs:{type:"link"},on:{click:t.selectAll}},[t._v(t._s(t.$t("setting.add.Standard.function.select.all")))])],1),e("section",{staticClass:"list"},t._l(t.functionList,(function(n){return e("section",{key:n.id,staticClass:"list-item tap-pointer flex y-axis-center x-space-between",on:{click:function(e){return t.addFunction(n)}}},[e("section",[e("p",{staticClass:"function-name",domProps:{textContent:t._s(n.name)}}),e("section",{staticClass:"flex y-axis-center"},[e("p",{staticClass:"function-point",domProps:{textContent:t._s("DP ID：".concat(n.dpid))}}),e("p",{staticClass:"function-point",domProps:{textContent:t._s(t.$t("setting.add.Standard.function.identifier")+"：".concat(n.identifier))}})])]),e("a-icon",{attrs:{type:"right"}})],1)})),0)]),e("section",{staticClass:"function-list-wrap"},[e("section",{staticClass:"header flex y-axis-center x-space-between"},[e("span",{domProps:{textContent:t._s(t.$t("setting.add.Standard.function.selected")+"(".concat(this.selectedList.length,")"))}}),e("a-button",{attrs:{type:"link"},on:{click:t.deleteAll}},[t._v(t._s(t.$t("setting.add.Standard.function.delete.selected")))])],1),e("section",{staticClass:"list"},t._l(t.selectedList,(function(n,i){return e("section",{key:n.id,staticClass:"list-item select-item flex y-axis-center x-space-between"},[e("section",{staticClass:"function-info-wrap"},[e("p",{staticClass:"function-name",domProps:{textContent:t._s(n.name)}}),e("section",{staticClass:"flex y-axis-center function-info"},[e("p",{staticClass:"function-point point-id",domProps:{textContent:t._s("ID:".concat(n.id))}}),e("p",{staticClass:"function-point identifier",domProps:{textContent:t._s(t.$t("setting.add.Standard.function.identifier")+":".concat(n.identifier))}})])]),e("a-icon",{attrs:{type:"close"},on:{click:function(e){return t.deleteFunction(i)}}})],1)})),0)])])])],1)},s=[],c=n("2909"),a=n("c7eb"),o=n("1da1"),r=(n("4de4"),n("d3b7"),n("caad"),n("2532"),n("d81d"),n("a434"),n("99af"),n("c4c8")),d={name:"AddStandardFunction",components:{},props:{list:{type:Array,default:function(){return[]}},visible:{type:Boolean,default:!1},productId:{type:String,default:""},baseProductId:{type:String,default:""}},data:function(){return{confirmLoading:!1,selectedList:[],functionListAll:[],functionList:[]}},watch:{selectedList:function(){var t=this;this.functionList=this.functionListAll.filter((function(e){return!t.selectId.includes(e.id)}))},visible:function(t){var e=this;return Object(o["a"])(Object(a["a"])().mark((function n(){return Object(a["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return");case 2:return e.selectedList=[],n.next=5,e.getStandardFuncList();case 5:case"end":return n.stop()}}),n)})))()}},computed:{selectId:function(){var t;return null!==(t=this.selectedList.map((function(t){return t.id})))&&void 0!==t?t:[]}},mounted:function(){},methods:{getStandardFuncList:function(){var t=this;return Object(o["a"])(Object(a["a"])().mark((function e(){var n,i,s,c;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["C"])({baseProductId:t.baseProductId});case 2:if(i=e.sent,0===i.code){e.next=5;break}return e.abrupt("return");case 5:if(s=null===(n=i.data)||void 0===n?void 0:n.list,s&&0!=s.length){e.next=8;break}return e.abrupt("return");case 8:c=t.list.map((function(t){return t.identifier})),t.functionListAll=s.filter((function(t){return!c.includes(t.identifier)})),t.functionList=t.functionListAll;case 11:case"end":return e.stop()}}),e)})))()},handleOk:function(){var t=this;return Object(o["a"])(Object(a["a"])().mark((function e(){var n;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.confirmLoading=!0,e.next=3,Object(r["c"])({productId:t.productId,funcList:t.selectedList});case 3:if(n=e.sent,t.confirmLoading=!1,0===n.code){e.next=7;break}return e.abrupt("return");case 7:t.$emit("confirmEdit"),t.$message.info(t.$t("public.add_success"));case 9:case"end":return e.stop()}}),e)})))()},handleCancel:function(){this.$emit("cancelEdit")},addFunction:function(t){this.selectedList.push(t)},deleteFunction:function(t){this.selectedList.splice(t,1)},selectAll:function(){this.selectedList=[].concat(Object(c["a"])(this.selectedList),Object(c["a"])(this.functionList))},deleteAll:function(){this.selectedList=[]}}},l=d,u=(n("17af"),n("2877")),f=Object(u["a"])(l,i,s,!1,null,"2d252af4",null);e["default"]=f.exports},ecf8:function(t,e,n){}}]);