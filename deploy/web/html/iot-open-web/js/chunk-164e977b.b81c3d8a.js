(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-164e977b","chunk-2d0d9fdd"],{"16c6":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.$t("device.generate.triple.title"),width:600,visible:e.visible,"confirm-loading":e.confirmLoading},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form-model",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules,"label-col":{span:5},"wrapper-col":{span:19}}},[t("p",{staticClass:"warning-text"},[e._v(e._s(e.$t("device.generate.triple.warning.text")))]),t("a-form-model-item",{attrs:{label:e.$t("device.generate.triple.label.number"),prop:"number"}},[t("a-input-number",{attrs:{precision:0,min:1,placeholder:e.$t("device.generate.triple.placeholder")},model:{value:e.form.number,callback:function(t){e.$set(e.form,"number",t)},expression:"form.number"}})],1),t("a-form-model-item",{attrs:{label:e.$t("device.export.triple.fileName"),prop:"fileName"}},[t("a-upload",{attrs:{name:"file",accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel,text/csv",showUploadList:!1,beforeUpload:e.beforeUpload}},[t("a-button",[e._v(" "+e._s(e.$t("public.import"))+" ")])],1),t("p",{staticClass:"warning-tips"},[e._v(e._s(e.$t("manufacture.button.addTriple.tips")))]),t("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"},{name:"model",rawName:"v-model",value:e.form.fileName,expression:"form.fileName"}],domProps:{value:e.form.fileName},on:{input:function(t){t.target.composing||e.$set(e.form,"fileName",t.target.value)}}}),t("p",{domProps:{textContent:e._s(e.form.fileName||"")}})],1),t("a-form-model-item",{attrs:{label:e.$t("device.generate.triple.label.batchId"),prop:"batchId"}},[t("a-input-number",{attrs:{min:0,precision:0,placeholder:e.$t("device.generate.triple.placeholder")},model:{value:e.form.batchId,callback:function(t){e.$set(e.form,"batchId",t)},expression:"form.batchId"}})],1)],1)],1)],1)},n=[],i=a("5530"),s=a("c7eb"),o=a("1da1"),l=(a("d3b7"),a("b0c0"),a("aa98")),c={name:"GeneratTriple",props:{visible:{type:Boolean,default:!1}},data:function(){return{rules:{number:[{type:"number",required:!0,message:this.$t("device.generate.triple.rule.number"),trigger:"blur"}],fileName:[{required:!0,message:this.$t("device.generate.triple.rule.fileName"),trigger:"change"}]},form:{},confirmLoading:!1,downloadDisable:!1}},created:function(){},methods:{handleCancel:function(){this.form={},this.$emit("handleCancel")},handleOk:function(){var e=this;this.$refs.ruleForm.validate(function(){var t=Object(o["a"])(Object(s["a"])().mark((function t(a){var r,n;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return e.confirmLoading=!0,r=new FormData,r.append("file",e.form.file),r.append("number",e.form.number),e.form.batchId&&r.append("batchId",e.form.batchId),t.next=9,Object(l["d"])(r);case 9:if(n=t.sent,e.confirmLoading=!1,0===n.code){t.next=13;break}return t.abrupt("return");case 13:e.form={},e.$emit("handleOk");case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},beforeUpload:function(e){var t=this;return"text/csv"!=e.type&&"application/vnd.ms-excel"!==e.type&&"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"!==e.type?(this.$message.warning(this.$t("device.generate.triple.file.type")),!1):new Promise((function(a,r){var n=e.size/1024/1024>10;n&&(t.$message.warning(t.$t("device.generate.triple.file.size")),r(!1)),t.form=Object(i["a"])(Object(i["a"])({},t.form),{},{file:e,fileName:e.name}),t.$refs["ruleForm"].clearValidate(["fileName"]),r(!1)}))}}},u=c,m=(a("94f5"),a("2877")),d=Object(m["a"])(u,r,n,!1,null,"0441ea64",null);t["default"]=d.exports},"473a":function(e,t,a){},"6a62":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.$t("manufacture.detail.title"),width:800,visible:e.visible},on:{cancel:e.handleCancel}},[t("h3",[e._v(e._s(e.$t("manufacture.detail.baseMsg")))]),t("a-form-model",{staticClass:"regular-form",attrs:{model:e.data,"label-col":{span:7},"wrapper-col":{span:13}}},[t("a-form-model-item",{attrs:{label:e.$t("manufacture.columns.did")}},[e._v(" "+e._s(e.data.did)+" ")]),t("a-form-model-item",{attrs:{label:e.$t("manufacture.columns.username")}},[e._v(" "+e._s(e.data.userName)+" ")]),t("a-form-model-item",{attrs:{label:e.$t("manufacture.columns.password")}},[e._v(" "+e._s(e.data.passward)+" ")]),t("a-form-model-item",{attrs:{label:e.$t("manufacture.columns.sn")}},[e._v(" "+e._s(e.data.sn)+" ")]),t("a-form-model-item",{attrs:{label:e.$t("manufacture.columns.batchId")}},[e._v(" "+e._s(e.data.batchId)+" ")]),t("a-form-model-item",{attrs:{label:e.$t("manufacture.columns.productName")}},[e._v(" "+e._s(e.data.productName)+" ")]),t("a-form-model-item",{attrs:{label:e.$t("manufacture.columns.isActived")}},[e._v(" "+e._s(e.$DictName("active_status",e.data.activeStatus))+" ")]),t("a-form-model-item",{attrs:{label:e.$t("manufacture.columns.createTime")}},[e._v(" "+e._s(e._f("momentFilter")(e.data.createdAt))+" ")])],1),t("h3",[e._v(e._s(e.$t("manufacture.detail.exportDetail")))]),t("a-form-model",{staticClass:"regular-form",attrs:{model:e.data,"label-col":{span:7},"wrapper-col":{span:13}}},[t("a-form-model-item",{attrs:{label:e.$t("manufacture.columns.exportTimes")}},[e._v(" "+e._s(e.data.exportCount)+" ")]),e._l(e.data.exportList||[],(function(a,r){return t("a-form-model-item",{key:r,attrs:{label:e.$t("manufacture.detail.exportTime")}},[e._v(" "+e._s(a.time)+" ")])}))],2),t("section",{staticClass:"ant-modal-footer",attrs:{slot:"footer"},slot:"footer"},[t("a-button",{on:{click:e.handleCancel}},[e._v(e._s(e.$t("public.close.text")))])],1)],1)},n=[],i={name:"ManufactureDetail",props:{visible:{type:Boolean,default:!1},data:{type:Object,default:function(){}}},data:function(){return{}},created:function(){},methods:{handleCancel:function(){this.$emit("handleClose")}}},s=i,o=a("2877"),l=Object(o["a"])(s,r,n,!1,null,"8d1bcea4",null);t["default"]=l.exports},"94f5":function(e,t,a){"use strict";a("473a")},a201:function(e,t,a){"use strict";a("b178")},b178:function(e,t,a){},b593:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("section",{staticClass:"page-wrap"},[t("a-page-header",{attrs:{title:e.$t("manufacture.title")}},[t("section",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:10}},[t("a-col",{attrs:{md:4,sm:24}},[t("a-form-item",[t("a-input",{attrs:{placeholder:e.$t("manufacture.placeholder.searchKey"),allowClear:!0},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.query.apply(null,arguments)}},model:{value:e.queryParam.searchKey,callback:function(t){e.$set(e.queryParam,"searchKey",t)},expression:"queryParam.searchKey"}})],1)],1),t("a-col",{attrs:{md:4,sm:24}},[t("a-form-item",[t("a-input",{attrs:{placeholder:e.$t("manufacture.placeholder.batchId"),allowClear:!0},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.query.apply(null,arguments)}},model:{value:e.queryParam.query.batch,callback:function(t){e.$set(e.queryParam.query,"batch",t)},expression:"queryParam.query.batch"}})],1)],1),t("a-col",{attrs:{md:3,sm:24}},[t("a-form-item",[t("a-select",{attrs:{placeholder:e.$t("manufacture.placeholder.exportTimes"),options:e.$DictList("device_export_count"),allowClear:!0},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.query.apply(null,arguments)}},model:{value:e.queryParam.query.exportCount,callback:function(t){e.$set(e.queryParam.query,"exportCount",t)},expression:"queryParam.query.exportCount"}})],1)],1),t("a-col",{attrs:{md:3,sm:24}},[t("a-form-item",[t("a-select",{attrs:{placeholder:e.$t("manufacture.placeholder.isActive"),options:e.$DictList("active_status"),allowClear:!0},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.query.apply(null,arguments)}},model:{value:e.queryParam.query.isActive,callback:function(t){e.$set(e.queryParam.query,"isActive",t)},expression:"queryParam.query.isActive"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:e.$t("manufacture.placeholder.createTime"),colon:!1}},[t("a-range-picker",{attrs:{separator:"—"},on:{change:e.handleChangeDate},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.query.apply(null,arguments)}},model:{value:e.queryParam.aliveTime,callback:function(t){e.$set(e.queryParam,"aliveTime",t)},expression:"queryParam.aliveTime"}},[t("icon-font",{style:{fontSize:"23px"},attrs:{slot:"suffixIcon",type:"icon-date"},slot:"suffixIcon"})],1)],1)],1),t("a-col",{attrs:{md:4,sm:24}},[t("span",{staticClass:"table-page-search-submitButtons"},[t("a-space",{attrs:{size:10}},[t("a-button",{attrs:{type:"primary"},on:{click:e.query}},[e._v(" "+e._s(e.$t("public.search"))+" ")]),t("a-button",{staticClass:"regular-button",on:{click:e.resetParam}},[e._v(" "+e._s(e.$t("public.reset"))+" ")])],1)],1)])],1)],1)],1),t("section",{staticClass:"table-operator flex y-axis-center x-space-between"},[t("section",{staticClass:"flex"},[t("a-button",{staticClass:"grean-button",on:{click:e.handleTriplesVisiable}},[t("icon-font",{style:{fontSize:"18px"},attrs:{type:"icon-add"}}),e._v(e._s(e.$t("manufacture.button.addTriple")))],1),t("a-button",{staticClass:"green-border-button",on:{click:e.exportTriple}},[t("export-green-icon"),e._v(e._s(e.$t("manufacture.button.exportTriple")))],1)],1),t("section",{staticClass:"device-count"},[t("span",[e._v(e._s(e.$t("manufacture.count.deviceTotal"))+"："+e._s(e.countData.deviceTotal||0))]),t("span",[e._v(e._s(e.$t("manufacture.count.activeTotal"))+"："+e._s(e.countData.activeTotal||0))])])]),t("a-table",{attrs:{size:"small",rowKey:"did","data-source":e.dataSource,columns:e.columns,loading:e.loading,pagination:e.pagination},on:{change:e.onChangePagination},scopedSlots:e._u([{key:"did",fn:function(a){return[t("p",{domProps:{textContent:e._s(a.deviceName)}}),t("p",{domProps:{textContent:e._s(a.did)}})]}},{key:"activeStatus",fn:function(t,a){return[e._v(" "+e._s(e.$DictName("active_status",a.activeStatus))+" ")]}},{key:"productName",fn:function(a,r){return[t("p",{domProps:{textContent:e._s(r.productName)}}),t("p",{domProps:{textContent:e._s(r.productKey)}})]}},{key:"createdAt",fn:function(a,r){return[t("span",[e._v(" "+e._s(e._f("momentFilter")(r.createdAt)))])]}},{key:"action",fn:function(a){return[t("a-button",{attrs:{type:"link",size:"small"},on:{click:function(t){return e.handleDetail(a)}}},[e._v(" "+e._s(e.$t("public.detail.text"))+" ")])]}}])}),t("generat-triple",{attrs:{visible:e.visible},on:{handleCancel:e.handleTriplesVisiable,handleOk:e.handleOk}}),t("export-triple",{attrs:{visible:e.exportTripleVisible},on:{handleClose:e.exportTriple}}),t("manufacture-detail",{attrs:{visible:e.detailVisible,data:e.detailData},on:{handleClose:function(t){e.detailVisible=!1}}})],1)],1)},n=[],i=a("c7eb"),s=a("5530"),o=a("1da1"),l=(a("99af"),a("aa98")),c=a("04b3"),u=a("16c6"),m=a("f49e"),d=a("6a62"),p={name:"Manufacture",data:function(){var e=this;return{pagination:{showSizeChanger:!0,current:1,pageSize:10,total:0,showTotal:function(t,a){return e.$t("public.pagination.total")+":".concat(t)+e.$t("public.pagination.current")+":".concat(a[0],"-").concat(a[1])}},queryParam:{page:1,limit:10,query:{}},columns:[{title:this.$t("manufacture.columns.did"),key:"did",scopedSlots:{customRender:"did"}},{dataIndex:"userName",title:this.$t("manufacture.columns.username")},{dataIndex:"passward",title:this.$t("manufacture.columns.password")},{dataIndex:"sn",title:this.$t("manufacture.columns.sn")},{dataIndex:"batchId",title:this.$t("manufacture.columns.batchId")},{dataIndex:"productName",title:this.$t("manufacture.columns.productName"),scopedSlots:{customRender:"productName"}},{dataIndex:"activeStatus",title:this.$t("manufacture.columns.isActived"),scopedSlots:{customRender:"activeStatus"}},{dataIndex:"exportCount",title:this.$t("manufacture.columns.exportTimes")},{dataIndex:"createdAt",title:this.$t("manufacture.columns.createTime"),scopedSlots:{customRender:"createdAt"}},{title:this.$t("public.action"),key:"action",align:"left",width:"220px",scopedSlots:{customRender:"action"}}],dataSource:[],visible:!1,loading:!1,exportTripleVisible:!1,detailVisible:!1,countData:{},detailData:{}}},components:{DateIcon:c["j"],GeneratTriple:u["default"],ExportGreenIcon:c["r"],ExportTriple:m["default"],ManufactureDetail:d["default"]},created:function(){this.queryList()},methods:{queryList:function(){var e=this;return Object(o["a"])(Object(i["a"])().mark((function t(){var a,r,n,o,c,u,m;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,a=Object(s["a"])({},e.queryParam),r=a.page,n=a.limit,o=a.query,c=a.searchKey,u=void 0===c?"":c,t.next=4,Object(l["k"])({page:r,limit:n,query:o,searchKey:u});case 4:if(m=t.sent,e.loading=!1,0===m.code){t.next=8;break}return t.abrupt("return");case 8:e.dataSource=m.data.list,e.pagination.total=m.data.total,e.getDeviceCount();case 11:case"end":return t.stop()}}),t)})))()},getDeviceCount:function(){var e=this;return Object(o["a"])(Object(i["a"])().mark((function t(){var a,r,n,o,c;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=Object(s["a"])({},e.queryParam),r=a.query,n=a.searchKey,o=void 0===n?"":n,t.next=3,Object(l["f"])({query:r,searchKey:o});case 3:if(c=t.sent,0===c.code){t.next=6;break}return t.abrupt("return");case 6:e.countData=c.data;case 7:case"end":return t.stop()}}),t)})))()},query:function(){this.queryParam.page=1,this.pagination.current=1,this.queryList()},resetParam:function(){this.pagination.current=1,this.queryParam={page:1,limit:this.queryParam.limit,query:{}},this.queryList()},onChangePagination:function(e){this.queryParam.page=e.current,this.queryParam.limit=e.pageSize,this.pagination.current=e.current,this.pagination.pageSize=e.pageSize,this.queryList()},handleChangeDate:function(e){e&&e.length>0?(this.queryParam.query["startTime"]=this.$TransformTimestamp(e[0]),this.queryParam.query["endTime"]=this.$TransformTimestamp(e[1])):(this.queryParam.query["startTime"]="",this.queryParam.query["endTime"]="")},handleTriplesVisiable:function(){this.visible=!this.visible},exportTriple:function(){this.exportTripleVisible=!this.exportTripleVisible},handleOk:function(){this.visible=!1,this.queryList()},handleDetail:function(e){this.detailData=e,this.detailVisible=!0}}},f=p,b=(a("a201"),a("2877")),h=Object(b["a"])(f,r,n,!1,null,"6862fb9f",null);t["default"]=h.exports}}]);