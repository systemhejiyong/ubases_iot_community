(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4f559830","chunk-2d21711c","chunk-2d21711c"],{4770:function(t,e,n){"use strict";n("9752")},"49a5":function(t,e,n){"use strict";n.r(e);n("b0c0");var r=function(){var t=this,e=t._self._c;return e("section",{staticClass:"page-wrap no-padding"},[e("a-page-header",{attrs:{title:t.$t("setting.basic.config.ruleConfig.title")},on:{back:t.back}},[e("icon-font",{style:{fontSize:"24px"},attrs:{slot:"backIcon",type:"icon-back_arrow"},slot:"backIcon"}),e("div",{staticClass:"product-details flex y-axis-center"},[e("section",{staticClass:"image-wrap"},[e("img",{staticClass:"product-image",attrs:{src:t.details.imageUrl||""}})]),e("section",{staticClass:"details"},[e("p",{staticClass:"product-name",domProps:{textContent:t._s(t.details.name)}}),e("section",[e("a-row",{attrs:{gutter:40,type:"flex"}},[e("a-col",[t._v(" "+t._s(t.$t("setting.network.info.details.productTypeName"))+":"+t._s(t.details.productTypeName)+" ")]),e("a-col",[t._v(" "+t._s(t.$t("setting.network.info.details.productKey"))+":"+t._s(t.details.productKey)+" ")]),e("a-col",[t._v(" "+t._s(t.$t("setting.network.info.details.networkType"))+": "+t._s(t.$DictName("network_type",t.details.networkType))+" ")]),e("a-col",[t._v(" "+t._s(t.$t("setting.network.info.details.powerConsumeType"))+":"+t._s(t.$DictName("power_consume_type",t.details.powerConsumeType))+" ")])],1)],1)])]),e("div",{staticClass:"scene-content"},[e("div",{staticClass:"flex y-axis-center x-space-between"},[e("p",{staticClass:"tips-text"},[t._v(" "+t._s(t.$t("setting.basic.config.ruleConfig.detail1"))),e("br"),t._v(" "+t._s(t.$t("setting.basic.config.ruleConfig.detail2"))),e("br"),t._v(" "+t._s(t.$t("setting.basic.config.ruleConfig.detail3"))+" ")]),e("a-button",{staticClass:"grean-button",attrs:{type:"primary"},on:{click:function(e){return t.handleEdit({},"add")}}},[e("icon-font",{style:{fontSize:"18px"},attrs:{type:"icon-add"}}),t._v(" "+t._s(t.$t("setting.ruleConfig.addRule.btn"))+" ")],1)],1),e("a-table",{attrs:{size:"small",rowKey:"id",pagination:!1,"data-source":t.dataSource,columns:t.columns},scopedSlots:t._u([{key:"status",fn:function(n,r){return e("span",{class:{enable:1==r.status}},[t._v(" "+t._s(t.$DictName("rule_set_status",r.status))+" ")])}},{key:"ifSpecsDesc",fn:function(n,r){return e("section",{},t._l(r.ifSpecsDesc,(function(n,r){return e("p",{key:r},[t._v(" "+t._s(n)+" ")])})),0)}},{key:"thenSpecsDesc",fn:function(n,r){return e("section",{},t._l(r.thenSpecsDesc,(function(n,r){return e("p",{key:r},[t._v(" "+t._s(n)+" ")])})),0)}},{key:"action",fn:function(n){return[e("section",{staticClass:"action-wrap"},[2==n.status?e("a-button",{attrs:{type:"link",size:"small"},on:{click:function(e){return t.handleSetStatus(n)}}},[t._v(" "+t._s(t.$t("public.enable"))+" ")]):t._e(),1==n.status?e("a-button",{attrs:{type:"link",size:"small"},on:{click:function(e){return t.handleSetStatus(n)}}},[t._v(" "+t._s(t.$t("public.stop"))+" ")]):t._e(),e("a-divider",{attrs:{type:"vertical"}}),e("a-button",{attrs:{type:"link",size:"small"},on:{click:function(e){return t.handleEdit(n,"edit")}}},[t._v(" "+t._s(t.$t("public.edit"))+" ")]),e("a-divider",{attrs:{type:"vertical"}}),e("a-button",{attrs:{type:"link",size:"small"},on:{click:function(e){return t.handleDelete(n.id)}}},[t._v(" "+t._s(t.$t("public.delete"))+" ")])],1)]}}])})],1),e("edit-rule",{attrs:{visible:t.visible,type:t.editType,productId:t.productId,productKey:t.productKey,detail:t.ruleDetail,funcOptions:t.funcOptions,dataSource:t.funcDataSource,dataOrigin:0},on:{handleCancel:function(e){t.visible=!1},handleOk:t.handleOk}})],1)],1)},o=[],u=n("5530"),a=n("c7eb"),c=n("1da1"),i=(n("d81d"),n("b64b"),n("4de4"),n("d3b7"),n("99af"),n("c4c8")),s=n("c3fb"),d=n("3cb2"),p={name:"RuleConfig",components:{EditRule:d["default"]},data:function(){return{details:{},productId:"",productKey:"",status:0,from:"",dataSource:[],columns:[{customRender:function(t,e,n){return n+1},title:this.$t("public.sort.number")},{dataIndex:"ruleName",title:this.$t("setting.ruleConfig.columns.ruleName")},{dataIndex:"ifSpecsDesc",title:this.$t("setting.ruleConfig.columns.if"),scopedSlots:{customRender:"ifSpecsDesc"}},{dataIndex:"thenSpecsDesc",title:this.$t("setting.ruleConfig.columns.then"),scopedSlots:{customRender:"thenSpecsDesc"}},{dataIndex:"status",title:this.$t("setting.ruleConfig.columns.status"),scopedSlots:{customRender:"status"}},{title:this.$t("public.action"),key:"action",align:"center",width:"200px",scopedSlots:{customRender:"action"}}],funcOptions:[],funcDataSource:{},visible:!1,editType:"",ruleDetail:{}}},mounted:function(){var t=this;return Object(c["a"])(Object(a["a"])().mark((function e(){return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.productId=t.$route.query.productId||"",t.productKey=t.$route.query.productKey||"",t.status=t.$route.query.status||0,t.from=t.$route.query.from||"",!t.productId){e.next=10;break}return e.next=7,t.getProductDetails();case 7:return e.next=9,t.getFuncList();case 9:t.getList();case 10:case"end":return e.stop()}}),e)})))()},computed:{},methods:{getProductDetails:function(){var t=this;return Object(c["a"])(Object(a["a"])().mark((function e(){var n;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["z"])(t.productId);case 2:if(n=e.sent,0===n.code){e.next=5;break}return e.abrupt("return");case 5:t.details=n.data;case 6:case"end":return e.stop()}}),e)})))()},getList:function(){var t=this;return Object(c["a"])(Object(a["a"])().mark((function e(){var n,r;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["e"])({productId:t.productId,dataOrigin:0});case 2:if(r=e.sent,0===r.code){e.next=5;break}return e.abrupt("return");case 5:t.dataSource=(null===(n=r.data)||void 0===n?void 0:n.map((function(e){var n=JSON.parse(e.ifSpecs),r=JSON.parse(e.thenSpecs),o=n.map((function(e){var n,r=t.funcDataSource[e.dpId],o=e.value;5!=e.operate?"ENUM"!=r.dataType&&"BOOL"!=r.dataType||(o=(null===(n=r.dataSpecsList.filter((function(t){return t.value==o})))||void 0===n||null===(n=n.pop())||void 0===n?void 0:n.label)||""):o="";return"".concat(r.name).concat(t.$DictName("rule_if_operation",e.operate)).concat(o)})),a=r.map((function(e){var n,r=t.funcDataSource[e.dpId],o="";1==e.operate&&(o="ENUM"==r.dataType||"BOOL"==r.dataType?(null===(n=r.dataSpecsList.filter((function(t){return t.value==e.value})))||void 0===n||null===(n=n.pop())||void 0===n?void 0:n.label)||"":e.value);return"".concat(r.name).concat(t.$DictName("rule_then_operation",e.operate)).concat(o)}));return Object(u["a"])(Object(u["a"])({},e),{},{ifSpecs:n,thenSpecs:r,ifSpecsDesc:o,thenSpecsDesc:a})})))||[];case 6:case"end":return e.stop()}}),e)})))()},getFuncList:function(){var t=this;return Object(c["a"])(Object(a["a"])().mark((function e(){var n,r;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["F"])({productId:t.productId,condType:"all"});case 2:if(r=e.sent,0===r.code){e.next=5;break}return e.abrupt("return");case 5:t.funcOptions=(null===(n=r.data)||void 0===n?void 0:n.map((function(e){return t.funcDataSource[e.dpId]=Object(u["a"])(Object(u["a"])({},e),{},{dataSpecs:e.dataSpecs?JSON.parse(e.dataSpecs):{},dataSpecsList:(e.dataSpecsList?JSON.parse(e.dataSpecsList):[]).map((function(t){return{value:t.value,label:t.desc||t.name}}))}),{value:e.dpId,label:e.name}})))||[];case 6:case"end":return e.stop()}}),e)})))()},handleEdit:function(t,e){this.editType=e,this.visible=!0,this.ruleDetail=Object(u["a"])(Object(u["a"])({},t),{},{dataOrigin:0})},handleOk:function(){this.visible=!1,this.getList()},handleSetStatus:function(t){var e=this;return Object(c["a"])(Object(a["a"])().mark((function n(){var r;return Object(a["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(s["d"])({id:t.id,status:1==t.status?2:1});case 2:if(r=n.sent,0===r.code){n.next=5;break}return n.abrupt("return");case 5:e.$message.success(e.$t("public.update.succeed")),e.getList();case 7:case"end":return n.stop()}}),n)})))()},handleDelete:function(t){var e=this;return Object(c["a"])(Object(a["a"])().mark((function n(){var r;return Object(a["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(s["b"])(t);case 2:if(r=n.sent,0===r.code){n.next=5;break}return n.abrupt("return");case 5:e.$message.success(e.$t("public.delete_success")),e.getList();case 7:case"end":return n.stop()}}),n)})))()},back:function(){"product"==this.from?this.$router.push({path:"/product/product/setting/index",name:"Setting",query:{productId:this.productId},params:{tab:3}}):this.$router.back(-1)}}},l=p,f=(n("4770"),n("2877")),b=Object(f["a"])(l,r,o,!1,null,"1ff9d782",null);e["default"]=b.exports},9752:function(t,e,n){},c4c8:function(t,e,n){"use strict";n.d(e,"A",(function(){return o})),n.d(e,"z",(function(){return u})),n.d(e,"j",(function(){return a})),n.d(e,"y",(function(){return c})),n.d(e,"g",(function(){return i})),n.d(e,"m",(function(){return s})),n.d(e,"F",(function(){return d})),n.d(e,"t",(function(){return p})),n.d(e,"C",(function(){return l})),n.d(e,"c",(function(){return f})),n.d(e,"k",(function(){return b})),n.d(e,"a",(function(){return m})),n.d(e,"h",(function(){return v})),n.d(e,"v",(function(){return h})),n.d(e,"Q",(function(){return w})),n.d(e,"n",(function(){return O})),n.d(e,"e",(function(){return g})),n.d(e,"q",(function(){return j})),n.d(e,"p",(function(){return y})),n.d(e,"P",(function(){return k})),n.d(e,"K",(function(){return S})),n.d(e,"x",(function(){return _})),n.d(e,"R",(function(){return x})),n.d(e,"w",(function(){return D})),n.d(e,"r",(function(){return $})),n.d(e,"N",(function(){return C})),n.d(e,"d",(function(){return I})),n.d(e,"o",(function(){return L})),n.d(e,"f",(function(){return T})),n.d(e,"M",(function(){return N})),n.d(e,"E",(function(){return F})),n.d(e,"D",(function(){return R})),n.d(e,"U",(function(){return z})),n.d(e,"H",(function(){return E})),n.d(e,"T",(function(){return K})),n.d(e,"G",(function(){return q})),n.d(e,"O",(function(){return G})),n.d(e,"B",(function(){return J})),n.d(e,"I",(function(){return P})),n.d(e,"J",(function(){return M})),n.d(e,"L",(function(){return U})),n.d(e,"S",(function(){return B})),n.d(e,"s",(function(){return V})),n.d(e,"b",(function(){return A})),n.d(e,"l",(function(){return H})),n.d(e,"i",(function(){return Q})),n.d(e,"u",(function(){return W}));var r=n("b775");function o(t){return Object(r["b"])({url:"/v1/platform/web/open/product/list",method:"post",data:t})}function u(t){return Object(r["b"])({url:"/v1/platform/web/open/product/detail/"+t,method:"get"})}function a(t){return Object(r["b"])({url:"/v1/platform/web/open/product/delete",method:"post",data:t})}function c(){return Object(r["b"])({url:"/v1/platform/web/open/productType/get",method:"get"})}function i(t){return Object(r["b"])({url:"/v1/platform/web/open/product/save",method:"post",data:t})}function s(t){return Object(r["b"])({url:"/v1/platform/web/open/product/edit",method:"post",data:t})}function d(t){return Object(r["b"])({url:"/v1/platform/web/open/product/functions",method:"get",params:t})}function p(t){return Object(r["b"])({url:"/v1/platform/web/open/product/funcList",method:"get",params:t})}function l(t){return Object(r["b"])({url:"/v1/platform/web/open/product/standardFuncList",method:"get",params:t})}function f(t){return Object(r["b"])({url:"/v1/platform/web/open/product/addStandardFunc",method:"post",data:t})}function b(t){return Object(r["b"])({url:"/v1/platform/web/open/product/editFunc",method:"post",data:t})}function m(t){return Object(r["b"])({url:"/v1/platform/web/open/product/addFunc",method:"post",data:t})}function v(t){return Object(r["b"])({url:"/v1/platform/web/open/product/deleteFunc",method:"post",data:t})}function h(t){return Object(r["b"])({url:"/v1/platform/web/open/product/queryModules",method:"get",params:t})}function w(t){return Object(r["b"])({url:"/v1/platform/web/open/product/selectModule",method:"post",data:t})}function O(t){return Object(r["b"])({url:"/v1/platform/web/open/firmware/changeVersionList",method:"get",params:t})}function g(t){return Object(r["b"])({url:"/v1/platform/web/open/product/changeVersionSubmit",method:"post",data:t})}function j(t){return Object(r["b"])({url:"/v1/platform/web/open/product/queryCustomFirmware",method:"get",params:t})}function y(t){return Object(r["b"])({url:"/v1/platform/web/open/firmware/changeCustomVersionList",method:"get",params:t})}function k(t){return Object(r["b"])({url:"/v1/platform/web/open/product/selectCustomerFirmware",method:"post",data:t})}function S(t){return Object(r["b"])({url:"/v1/platform/web/open/product/removeCustomerFirmware",method:"post",data:t})}function _(t){return Object(r["b"])({url:"/v1/platform/web/open/product/controlPanelList",method:"get",params:t})}function x(t){return Object(r["b"])({url:"/v1/platform/web/open/product/selectControlPanel",method:"post",data:t})}function D(t){return Object(r["b"])({url:"/v1/platform/web/open/product/getNetworkGuide",method:"get",params:t})}function $(t){return Object(r["b"])({url:"/v1/platform/web/open/product/getDefaultNetworkGuide",method:"get",params:t})}function C(t){return Object(r["b"])({url:"/v1/platform/web/open/product/saveNetworkGuide",method:"post",data:t})}function I(t){return Object(r["b"])({url:"/v1/platform/web/open/product/changeNetworkGuide",method:"post",data:t})}function L(t){return Object(r["b"])({url:"/v1/platform/web/open/product/completeDevelopDetailed",method:"get",params:t})}function T(t){return Object(r["b"])({url:"/v1/platform/web/open/product/completeDevelop",method:"post",data:t})}function N(t){return Object(r["b"])({url:"/v1/platform/web/open/product/returnDevelop",method:"post",data:t})}function F(t){return Object(r["b"])({url:"/v1/platform/web/template/testCaseTpl/download",method:"get",params:t})}function R(t){return Object(r["b"])({url:"/v1/platform/web/open/product/getTestReportFile",method:"get",params:t})}function z(t){return Object(r["b"])({url:"/v1/platform/web/open/product/uploadTestReport",method:"post",timeout:3e4,data:t})}function E(t){return Object(r["b"])({url:"/v1/platform/web/open/product/voice/list",method:"post",data:t})}function K(t){return Object(r["b"])({url:"/v1/platform/web/open/product/voice/publish",method:"post",data:t})}function q(t){return Object(r["b"])({url:"/v1/platform/web/open/product/voice/detail",method:"post",data:t})}function G(t){return Object(r["b"])({url:"/v1/platform/web/open/product/voice/save",method:"post",data:t})}function J(t){return Object(r["b"])({url:"/v1/platform/web/open/product/voice/publish/record",method:"get",params:t})}function P(t){return Object(r["b"])({url:"/v1/platform/web/open/product/voice/getDoc",method:"get",params:t})}function M(t){return Object(r["b"])({url:"/v1/platform/web/open/product/voice/unitList",method:"post",data:t})}function U(t){return Object(r["b"])({url:"/v1/platform/web/open/product/resetStandardFunc",method:"GET",params:t})}function B(t){return Object(r["b"])({url:"/v1/platform/web/open/product/setSceneFunc",method:"post",data:t})}function V(t){return Object(r["b"])({url:"/v1/platform/web/open/product/funcList",method:"get",params:t})}function A(t){return Object(r["b"])({url:"/v1/platform/web/open/manual/add",method:"post",data:t})}function H(t){return Object(r["b"])({url:"/v1/platform/web/open/manual/edit",method:"post",data:t})}function Q(t){return Object(r["b"])({url:"/v1/platform/web/open/manual/del",method:"post",data:t})}function W(t){return Object(r["b"])({url:"/v1/platform/web/open/manual/detail",method:"GET",params:t})}}}]);