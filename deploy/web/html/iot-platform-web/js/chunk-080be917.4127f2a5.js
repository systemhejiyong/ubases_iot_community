(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-080be917","chunk-2d207f08"],{"32f1":function(t,e,i){},"749d":function(t,e,i){"use strict";i("b6cf")},a18e:function(t,e,i){"use strict";i.r(e);i("4e82");var a=function(){var t=this,e=t._self._c;return e("a-modal",{attrs:{title:t.modalTitle,width:640,visible:t.visible,"confirm-loading":t.confirmLoading},on:{cancel:t.handleCancel},scopedSlots:t._u([{key:"footer",fn:function(){return[e("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")]),e("a-divider",{attrs:{type:"vertical"}}),e("a-button",{key:"submit",attrs:{type:"primary",loading:t.confirmLoading},on:{click:t.handleOk}},[t._v(" 确定 ")])]},proxy:!0}])},[e("a-spin",{attrs:{spinning:t.confirmLoading}},[e("a-form-model",{ref:"ruleForm",attrs:{model:t.form,rules:t.rules}},[e("a-form-model-item",{attrs:{"label-col":t.labelCol,"wrapper-col":t.wrapperCol,label:"图标",prop:"dirImg"}},[e("a-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],model:{value:t.form.dirImg,callback:function(e){t.$set(t.form,"dirImg",e)},expression:"form.dirImg"}}),e("upload-img",{attrs:{imgDir:"appHelpCenter",imgSizeMode:1,imgWidth:120,imgHeight:120,imgRequest:!0,propsImgSrc:t.form.dirImg,imgHint:"图片120*120px,png格式最佳,大小不超过1M"},on:{ok:t.handleUploadImg}})],1),e("a-form-model-item",{attrs:{"label-col":t.labelCol,"wrapper-col":t.wrapperCol,label:"序号",prop:"sort"}},[e("a-input-number",{attrs:{placeholder:"请输入序号",min:0,precision:0},model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",e)},expression:"form.sort"}})],1),t._l(t.form.docDirLangs,(function(i,a){return e("a-form-model-item",{key:i.lang,attrs:{"label-col":t.labelCol,"wrapper-col":t.wrapperCol,label:i.langName,prop:"docDirLangs."+a+".dirName",rules:t.langRules(i.lang)}},[e("a-input",{model:{value:i.dirName,callback:function(e){t.$set(i,"dirName",e)},expression:"v.dirName"}})],1)}))],2)],1)],1)},n=[],r=i("5530"),o=(i("d81d"),i("b0c0"),i("d3b7"),i("a9e3"),i("2f62")),l=i("61f7"),s=i("0f49"),c={data:function(){var t=function(t){var e=Object(l["b"])(1,50,"字符长度1-50");return"zh"===t?e.push({required:!0,pattern:l["q"],message:"请输入文本内容(中文,英文,数字和空格)"}):"en"===t&&e.push({required:!0,pattern:l["f"],message:"请输入文本内容(英文,数字和空格)"}),e};return{modalTitle:"",visible:!1,confirmLoading:!1,id:"",form:{id:"",parentId:"0",dirImg:"",docDirLangs:[],sort:0},rules:{dirImg:Object(l["d"])("请上传图片")},labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:21}},langRules:t,helpId:""}},computed:Object(r["a"])({},Object(o["c"])(["langTypeList"])),methods:{init:function(t){var e=this,i=t.id,a=void 0===i?"":i,n=t.parentId,r=void 0===n?"0":n,o=t.type,l=void 0===o?"add":o,c=t.helpId,d=void 0===c?"":c;this.visible=!0,this.confirmLoading=!0,this.$refs["ruleForm"]&&this.$refs["ruleForm"].resetFields(),this.form.id=a,this.form.parentId=r,this.form.docDirLangs=this.langTypeList.map((function(t){return{dirName:"",lang:t.code,langName:t.name}})),"add"===l?(this.modalTitle="添加目录",this.confirmLoading=!1,this.helpId=d):"edit"===l&&(this.modalTitle="编辑目录",Object(s["F"])({id:a}).then((function(t){0===t.code&&(e.form.id=t.data.id||a,e.form.sort=t.data.sort,e.form.parentId=t.data.parentId,e.form.dirImg=t.data.dirImg,e.form.docDirLangs=e.langTypeList.map((function(e){var i={lang:e.code,langName:e.name,dirName:""};return t.data.docDirLangs.some((function(t){if(t.lang===e.code)return i.dirName=t.dirName,!0})),i})))})).finally((function(){e.confirmLoading=!1})))},handleOk:function(){var t=this;this.$refs["ruleForm"].validate((function(e){if(e){t.confirmLoading=!0,t.form.sort=Number(t.form.sort)||1;var i=Object(r["a"])(Object(r["a"])({},t.form),{},{helpId:t.helpId});t.form.id?Object(s["y"])(i).then((function(e){t.toast(e),0===e.code&&(t.visible=!1,t.$emit("ok"))})).finally((function(){t.confirmLoading=!1})):Object(s["d"])(i).then((function(e){t.toast(e),0===e.code&&(t.visible=!1,t.$emit("ok"))})).finally((function(){t.confirmLoading=!1}))}}))},handleCancel:function(){this.visible=!1},handleUploadImg:function(t){this.$set(this.form,"dirImg",t.fullPath),this.$refs["ruleForm"].clearValidate(["dirImg"])}}},d=c,u=(i("c39a"),i("2877")),f=Object(u["a"])(d,a,n,!1,null,"2ea4a0af",null);e["default"]=f.exports},a355:function(t,e,i){"use strict";i.r(e);var a="0.2s height ease-in-out",n={beforeEnter:function(t){t.style.transition=a,t.dataset||(t.dataset={}),t.style.height=0},enter:function(t){0!==t.scrollHeight?t.style.height="".concat(t.scrollHeight,"px"):t.style.height="",t.style.overflow="hidden"},afterEnter:function(t){t.style.transition="",t.style.height=""},beforeLeave:function(t){t.dataset||(t.dataset={}),t.style.height="".concat(t.scrollHeight,"px"),t.style.overflow="hidden"},leave:function(t){0!==t.scrollHeight&&(t.style.transition=a,t.style.height=0)},afterLeave:function(t){t.style.transition="",t.style.height=""}};e["default"]={name:"CollapseTransition",functional:!0,render:function(t,e){var i=e.children,a={on:n};return t("transition",a,i)}}},b6cf:function(t,e,i){},c39a:function(t,e,i){"use strict";i("32f1")},fc4b:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t._self._c;return e("a-card",{attrs:{bordered:!1}},[e("a-row",{attrs:{gutter:16}},[e("a-col",{attrs:{xxl:6,xl:8,lg:24,md:24,sm:24}},[e("a-spin",{attrs:{spinning:t.loading}},[e("a-card",{attrs:{title:"目录",size:"small",bordered:!1}},[t._l(t.menuList,(function(i){return e("div",{key:i.id},[e("a-row",{staticStyle:{padding:"10px 0"},attrs:{type:"flex",justify:"space-between",align:"middle"}},[e("a-col",{attrs:{span:16}},[e("a-space",{attrs:{align:"center"},on:{click:function(e){return t.handleClick(i.id,i.collapse)}}},[i.children&&i.children.length&&i.collapse?e("icon-font",{attrs:{type:"caret-down"}}):i.children&&i.children.length&&!i.collapse?e("icon-font",{attrs:{type:"caret-right"}}):t._e(),e("img",{staticClass:"dir-img",attrs:{src:i.dirImg}}),e("div",{class:["aithings-microcheiria",i.id===t.activeIds[0]&&"active"]},[t._v(" "+t._s(i.docDirName)+" ")])],1)],1),e("a-col",[e("a-button",{attrs:{size:"small",icon:"edit"},on:{click:function(e){return t.editCatalogue(i.id)}}}),e("a-button",{staticStyle:{"margin-left":"6px"},attrs:{size:"small",type:"primary",icon:"plus"},on:{click:function(e){return t.addCatalogue(i.id)}}}),e("a-button",{staticStyle:{"margin-left":"6px"},attrs:{size:"small",type:"danger",icon:"delete",disabled:Boolean(i.children)},on:{click:function(e){return t.deleteCatalogue(i.id)}}})],1)],1),e("collapse-transition",[i.collapse&&i.children?e("div",t._l(i.children,(function(a){return e("div",{key:a.id},[e("a-row",{staticStyle:{padding:"0 0 10px 20px"},attrs:{type:"flex",justify:"space-between",align:"middle"}},[e("a-col",{attrs:{span:16}},[e("a-space",{attrs:{align:"center"},on:{click:function(e){return t.queryTable(i.id,a.id)}}},[e("img",{staticClass:"dir-img",attrs:{src:a.dirImg}}),e("div",{class:["aithings-microcheiria",a.id===t.activeIds[1]&&"active"]},[t._v(" "+t._s(a.docDirName)+" ")])])],1),e("a-col",[e("a-button",{attrs:{size:"small",icon:"edit"},on:{click:function(e){return t.editCatalogue(a.id)}}}),e("a-button",{staticStyle:{"margin-left":"6px"},attrs:{size:"small",type:"danger",icon:"delete"},on:{click:function(e){return t.deleteCatalogue(a.id)}}})],1)],1)],1)})),0):t._e()])],1)})),e("a-button",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{icon:"plus"},on:{click:function(e){return t.addCatalogue("0")}}},[t._v(" 添加一级目录 ")])],2)],1)],1),e("a-col",{attrs:{xxl:18,xl:16,lg:24,md:24,sm:24}},[e("problem-table",{ref:"problemTable",attrs:{menuList:t.menuList}})],1)],1),e("catalogue-modal",{ref:"catalogueModal",on:{ok:t.queryList}})],1)},n=[],r=i("5530"),o=(i("d3b7"),i("4e82"),i("d81d"),i("159b"),i("0f49")),l=i("4a55"),s=i("a18e"),c=i("ca00"),d=i("a355"),u={components:{"problem-table":l["default"],"catalogue-modal":s["default"],"collapse-transition":d["default"]},provide:function(){var t=this;return{menuList:function(){return t.menuList}}},data:function(){return{menuList:[],loading:!1,activeIds:[],id:""}},created:function(){this.id=this.$route.query.id,this.queryList()},methods:{queryList:function(){var t=this;this.loading=!0,Object(o["G"])({helpId:this.id}).then((function(e){if(0===e.code){var i,a=null===(i=e.data)||void 0===i?void 0:i.sort((function(t,e){return t.sort-e.sort}));if(t.menuList=Object(c["a"])(a,"id","parentId").map((function(t){return Object(r["a"])(Object(r["a"])({},t),{},{collapse:!1})})),!t.menuList.length)return;t.handleClick(t.menuList[0].id)}})).finally((function(){t.loading=!1}))},queryTable:function(t,e){this.activeIds[0]=t,this.activeIds[1]=e,this.$refs["problemTable"].init(this.activeIds),this.$forceUpdate()},handleClick:function(t,e){this.activeIds[0]=t,this.activeIds[1]="",this.$refs["problemTable"].init(this.activeIds),this.$forceUpdate(),e||this.menuList.forEach((function(e){e.id===t?e.collapse=!e.collapse:e.collapse=!1}))},addCatalogue:function(t){this.$refs["catalogueModal"].init({type:"add",parentId:t,helpId:this.id})},editCatalogue:function(t){this.$refs["catalogueModal"].init({type:"edit",id:t})},deleteCatalogue:function(t){var e=this;this.$confirm({title:"确定是否删除",content:"删除后，将不可恢复",onOk:function(){Object(o["n"])({id:t}).then((function(i){e.toast(i),0===i.code&&(e.queryList(),e.activeIds.forEach((function(i){t===i&&e.$refs["problemTable"].init([])})))}))}})}}},f=u,m=(i("749d"),i("2877")),p=Object(m["a"])(f,a,n,!1,null,"99f4995a",null);e["default"]=p.exports}}]);