(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0acf0c3c"],{"0a34":function(t,e,a){},8900:function(t,e,a){"use strict";a("0a34")},"9b3b":function(t,e,a){"use strict";a.r(e);a("b0c0");var i=function(){var t=this,e=t._self._c;return e("a-card",{attrs:{bordered:!1}},[e("div",{staticClass:"table-page-search-wrapper"},[e("a-form",{attrs:{layout:"inline"}},[e("a-row",{attrs:{gutter:48}},[e("a-col",t._b({},"a-col",t.aColFlex,!1),[e("a-form-item",[e("a-input",{attrs:{placeholder:t.$t("请输入固件名称,标识,key(ID)"),allowClear:!0},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.query.apply(null,arguments)}},model:{value:t.queryParam.searchKey,callback:function(e){t.$set(t.queryParam,"searchKey",e)},expression:"queryParam.searchKey"}})],1)],1),e("a-col",t._b({},"a-col",t.aColFlex,!1),[e("span",{staticClass:"table-page-search-submitButtons"},[e("a-button",{attrs:{icon:"search",type:"primary"},on:{click:t.query}},[t._v(" "+t._s(t.$t("public.query"))+" ")]),e("a-divider",{attrs:{type:"vertical"}}),e("a-button",{attrs:{icon:"redo"},on:{click:t.reset}},[t._v(" "+t._s(t.$t("public.reset"))+" ")]),e("a-divider",{attrs:{type:"vertical"}}),e("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(e){return t.linkToPage("","add")}}},[t._v(" "+t._s(t.$t("public.add"))+" ")])],1)])],1)],1)],1),e("a-table",{attrs:{size:"small",rowKey:"id","data-source":t.dataSource,columns:t.columns,loading:t.loading,pagination:t.pagination},on:{change:t.onChangePagination},scopedSlots:t._u([{key:"name",fn:function(a,i){return[e("div",{staticClass:"link-a",on:{click:function(e){return t.linkToPage(i.id,"details")}}},[t._v(" "+t._s(i.name)+" ")])]}},{key:"status",fn:function(a,i){return[e("span",[t._v(t._s(t.$DictName("web_status",i.status)))])]}},{key:"action",fn:function(a){return[e("a-button",{attrs:{type:"link",size:"small",icon:"edit"},on:{click:function(e){return t.linkToPage(a.id,"edit")}}},[t._v(" "+t._s(t.$t("public.edit"))+" ")]),1==a.status?e("a-divider",{attrs:{type:"vertical"}}):t._e(),1==a.status?e("a-button",{attrs:{type:"link",size:"small",icon:"setting"},on:{click:function(e){return t.handleSet(a)}}},[t._v(" 停用 ")]):t._e(),2==a.status?e("a-divider",{attrs:{type:"vertical"}}):t._e(),2==a.status?e("a-button",{attrs:{type:"link",size:"small",icon:"setting"},on:{click:function(e){return t.handleSet(a)}}},[t._v(" 启用 ")]):t._e(),e("a-divider",{attrs:{type:"vertical"}}),e("a-button",{attrs:{type:"link",size:"small",icon:"plus"},on:{click:function(e){return t.addVersion(a)}}},[t._v(" "+t._s(t.$t("firmware.addVersion"))+" ")])]}}])}),e("edit-version",{ref:"versionForm"})],1)},n=[],r=(a("99af"),a("d3b7"),a("c4c8")),s=a("2abe"),o={name:"FirmwareList",components:{EditVersion:s["default"]},data:function(){return{isInit:!1,pagination:{showSizeChanger:!0,current:1,pageSize:10,total:0,showTotal:function(t,e){return"总数:".concat(t," 当前:").concat(e[0],"-").concat(e[1])}},queryParam:{page:1,limit:10},columns:[{title:this.$t("firmware.sort"),customRender:function(t,e,a){return a+1}},{dataIndex:"name",title:this.$t("firmware.name"),scopedSlots:{customRender:"name"},width:"14%"},{dataIndex:"id",title:this.$t("firmware.id")},{dataIndex:"flag",title:this.$t("firmware.flag"),width:"14%"},{dataIndex:"typeName",title:this.$t("firmware.type")},{dataIndex:"version",title:this.$t("firmware.latestVersion")},{dataIndex:"status",title:this.$t("public.status"),scopedSlots:{customRender:"status"}},{title:this.$t("public.action"),key:"action",align:"center",width:"290px",scopedSlots:{customRender:"action"}}],dataSource:[],loading:!1}},created:function(){this.isInit=!0,this.queryList()},activated:function(){this.isInit?this.isInit=!1:this.queryList()},mounted:function(){},methods:{onChangePagination:function(t){this.queryParam.limit=t.pageSize,this.queryParam.page=t.current,this.pagination.current=t.current,this.pagination.pageSize=t.pageSize,this.queryList()},query:function(){this.queryParam.page=1,this.pagination.current=1,this.queryList()},reset:function(){this.queryParam={page:1,limit:this.queryParam.limit},this.pagination.current=1,this.queryList()},queryList:function(){var t=this;this.loading=!0,Object(r["D"])(this.queryParam).then((function(e){0==e.code&&(t.dataSource=e.data.list||[],t.pagination.total=e.data.total)})).finally((function(){t.loading=!1}))},linkToPage:function(t,e){this.$routerPush({path:"/product/firmware/details/index",query:{id:t,type:e},name:"FirmwareDetails"})},addVersion:function(t){var e={newVersion:t.version,firmwareName:t.name,firmwareId:t.id,firmwareFileList:[],status:2};this.$refs["versionForm"].init("add",e)},handleSet:function(t){var e=this,a="",i=null;2==t.status?(i=1,a="是否启用固件"):(i=2,a="是否停用固件"),this.$UpdateStatus(this,a).then((function(a){var n={id:t.id,status:i};Object(r["M"])(n).then((function(t){0==t.code&&e.queryList(),e.toast(t)}))}))}}},c=o,u=(a("8900"),a("2877")),l=Object(u["a"])(c,i,n,!1,null,"e80b7b10",null);e["default"]=l.exports}}]);