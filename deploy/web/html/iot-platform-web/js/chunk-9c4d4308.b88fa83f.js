(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9c4d4308"],{"453e":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("a-card",{attrs:{bordered:!1}},[t("a-page-header",{attrs:{title:"查看设备"},on:{back:function(t){return e.$multiTab.closeCurrentPage()}}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-card",{attrs:{title:"账号信息",bordered:!1}},[t("a-descriptions",[t("a-descriptions-item",{attrs:{label:"账号"}},[e._v(" "+e._s(e.logInfo.account)+" ")]),t("a-descriptions-item",{attrs:{label:"APP名称"}},[e._v(" "+e._s(e.logInfo.appName)+" ")]),t("a-descriptions-item",{attrs:{label:"服务区"}},[e._v(" "+e._s(e.logInfo.region)+" ")])],1)],1),t("a-card",{attrs:{title:"日志记录",bordered:!1}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:48}},[t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",[t("a-range-picker",{attrs:{allowClear:!1,"disabled-date":e.disabledDate,placeholder:["激活时间","激活时间"],separator:"—"},on:{change:e.dateChange,calendarChange:e.calendarChange,openChange:e.openChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.query.apply(null,arguments)}},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1)],1),t("a-col",{attrs:{md:4,sm:24}},[t("a-form-item",[t("a-select",{attrs:{placeholder:"请选择事件名称",allowClear:!0,options:e.$DictList("user_events")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.query.apply(null,arguments)}},model:{value:e.queryParam.query.eventName,callback:function(t){e.$set(e.queryParam.query,"eventName",t)},expression:"queryParam.query.eventName"}})],1)],1),t("a-col",{attrs:{md:4,sm:24}},[t("a-form-item",[t("a-select",{attrs:{placeholder:"请选择日志类型",allowClear:!0},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.query.apply(null,arguments)}},model:{value:e.queryParam.query.logType,callback:function(t){e.$set(e.queryParam.query,"logType",t)},expression:"queryParam.query.logType"}},e._l(e.logTypeList,(function(a){return t("a-select-option",{key:a.key,attrs:{value:a.key}},[e._v(" "+e._s(a.label)+" ")])})),1)],1)],1),t("a-col",{attrs:{md:4,sm:24}},[t("span",{staticClass:"table-page-search-submitButtons"},[t("a-button",{attrs:{icon:"search",type:"primary"},on:{click:e.query}},[e._v(" 查询 ")]),t("a-button",{staticStyle:{"margin-left":"8px"},attrs:{icon:"redo"},on:{click:e.reset}},[e._v(" 重置 ")])],1)])],1)],1)],1),t("a-table",{attrs:{size:"small",rowKey:"id","data-source":e.dataSourceRecord,columns:e.columnsRecord,loading:e.loading,pagination:e.pagination},on:{change:e.onChangePagination},scopedSlots:e._u([{key:"createdAt",fn:function(t,a){return[e._v(" "+e._s(e._f("momentFilter")(a.createdAt))+" ")]}},{key:"details",fn:function(a,n){return[t("div",[e._v("ip:"+e._s(n.details&&n.details.ip))]),t("div",[e._v("系统信息:"+e._s(n.details&&n.details.system))])]}}])})],1)],1)],1)],1)},r=[],i=(a("99af"),a("d3b7"),a("8916")),s=a("c1df"),l=a.n(s),o={name:"AppLogDetails",data:function(){return{two:{labelCol:{xs:{span:24},sm:{span:2}},wrapperCol:{xs:{span:24},sm:{span:22}}},did:"",logInfo:{},confirmLoading:!1,dataSourceRecord:[],columnsRecord:[{title:"序号",width:"80px",customRender:function(e,t,a){return a+1}},{dataIndex:"createdAt",title:"时区(GMT+8)",scopedSlots:{customRender:"createdAt"}},{dataIndex:"eventName",title:"事件名称"},{dataIndex:"logType",title:"日志类型"},{dataIndex:"details",title:"详情",scopedSlots:{customRender:"details"}}],queryParam:{page:1,limit:10,account:"",appKey:"",tenantId:"",query:{}},loading:!1,pagination:{showSizeChanger:!0,current:1,pageSize:10,total:0,showTotal:function(e,t){return"总数:".concat(e," 当前:").concat(t[0],"-").concat(t[1])}},disabledCurrent:null,date:[l()(),l()()],eventList:[{key:"注册",label:"注册"},{key:"登录",label:"登录"},{key:"注销账号",label:"注销账号"},{key:"忘记密码",label:"忘记密码"},{key:"第三方登录",label:"第三方登录"},{key:"第三方渠道注册",label:"第三方渠道注册"},{key:"添加家庭",label:"添加家庭"},{key:"发送邀请码",label:"发送邀请码"},{key:"转移家庭所有权",label:"转移家庭所有权"},{key:"设备激活",label:"设备激活"},{key:"删除设备",label:"删除设备"},{key:"创建智能场景",label:"创建智能场景"},{key:"场景删除",label:"场景删除"},{key:"反馈提交",label:"反馈提交"}],logTypeList:[{key:"操作日志",label:"操作日志"},{key:"错误日志",label:"错误日志"}]}},created:function(){this.logInfo=this.$route.query,this.queryList()},methods:{dateChange:function(e){this.date=e,e.length>0?(this.queryParam.query.startTime=Date.parse(e[0])/1e3,this.queryParam.query.endTime=Date.parse(e[1])/1e3):(this.queryParam.query.startTime="",this.queryParam.query.endTime="")},openChange:function(){var e;this.disabledCurrent=null!==(e=this.date[0])&&void 0!==e?e:null},calendarChange:function(e){this.disabledCurrent=e[0]},disabledDate:function(e){return this.disabledCurrent&&(e>l()(this.disabledCurrent).add(6,"days").endOf("day")||e<l()(this.disabledCurrent).subtract(7,"days").endOf("day"))||e>l()()},queryList:function(){var e=this;this.queryParam.account=this.logInfo.account,this.queryParam.appKey=this.logInfo.appKey,this.queryParam.tenantId=this.logInfo.tenantId,this.queryParam.regionServerId=this.logInfo.regionServerId,this.confirmLoading=!0,this.date.length>0&&(this.queryParam.query.startTime=Date.parse(this.date[0])/1e3,this.queryParam.query.endTime=Date.parse(this.date[1])/1e3),Object(i["b"])(this.queryParam).then((function(t){0===t.code&&(e.dataSourceRecord=t.data.list,e.pagination.total=t.data.total)})).finally((function(){e.confirmLoading=!1}))},onChangePagination:function(e){this.queryParam.page=e.current,this.queryParam.limit=e.pageSize,this.pagination.current=e.current,this.pagination.pageSize=e.pageSize,this.queryList()},query:function(){this.queryParam.page=1,this.pagination.current=1,this.queryList()},reset:function(){this.queryParam={page:1,limit:this.queryParam.limit,query:{}},this.date=[l()(),l()()],this.pagination.current=1,this.queryList()}}},u=o,d=(a("afd4"),a("2877")),c=Object(d["a"])(u,n,r,!1,null,"88f74662",null);t["default"]=c.exports},"53f6":function(e,t,a){},8916:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return i}));var n=a("b775");function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["b"])({url:"/v1/platform/web/log/app/userList",method:"post",data:e})}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["b"])({url:"/v1/platform/web/log/app/recordsList",method:"post",data:e})}},afd4:function(e,t,a){"use strict";a("53f6")}}]);