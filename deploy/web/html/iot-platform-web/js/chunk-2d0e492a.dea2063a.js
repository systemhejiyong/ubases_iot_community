(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e492a"],{9195:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t._self._c;return t.languages.length>1?e("a-row",{attrs:{gutter:16}},[e("a-col",{staticStyle:{border:"0px solid #e3e3e3",background:"#fff","padding-top":"10px","padding-bottom":"10px"},attrs:{span:24}},[e("a-table",{attrs:{border:"",rowKey:"id",size:"small",columns:t.columns,"data-source":t.dataList,scroll:t.tableScroll,pagination:!1},scopedSlots:t._u([t._l(t.languages,(function(a,n){return{key:a.id,fn:function(i,s){return[a.id==t.hideItem?[e("span",{key:n},[t._v(t._s(s[a.id]))])]:[s.isEnableEdit?e("a-textarea",{key:n,attrs:{maxLength:t.maxLength,"auto-size":""},model:{value:s[a.id],callback:function(e){t.$set(s,a.id,e)},expression:"record[item.id]"}}):e("span",{key:n},[t._v(t._s(s[a.id]))])]]}}})),{key:"action",fn:function(a,n){return[n.isEnableEdit?t._e():e("a-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.$set(n,"isEnableEdit",!0)}}},[t._v(" "+t._s(t.$t("public.edit"))+" ")]),n.isEnableEdit?e("a-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.handleSave(n)}}},[t._v(" "+t._s(t.$t("public.save"))+" ")]):t._e(),n.isEnableEdit?e("a-button",{staticStyle:{background:"gray","margin-left":"15px"},attrs:{size:"small",type:"primary"},on:{click:function(e){return t.handleCancel(n)}}},[t._v(" "+t._s(t.$t("public.cancel"))+" ")]):t._e()]}}],null,!0)})],1)],1):t._e()},i=[],s=a("5530"),o=a("2909"),d=(a("a9e3"),a("d3b7"),a("159b"),a("4de4"),a("99af"),a("d81d"),a("b775"));function l(t){return Object(d["b"])({url:"/v1/platform/web/basedata/translate/detail",method:"get",params:t})}function r(t){return Object(d["b"])({url:"/v1/platform/web/basedata/translate/add",method:"post",data:t})}function c(t){return Object(d["b"])({url:"/v1/platform/web/basedata/translate/edit",method:"post",data:t})}function u(t){return Object(d["b"])({url:"/v1/platform/web/basedata/translate/detail",method:"get",params:t})}var h={name:"setTranslate",props:{keyCode:{type:String,default:""},hideItem:{type:String,default:"zh"},maxLength:{type:Number,default:200}},data:function(){return{languages:["zh","en","jp"],tableScroll:{x:"calc(".concat(100,"px + 50%)")},columns:[{title:this.$t("public.action"),dataIndex:"action",width:180,scopedSlots:{customRender:"action"}}],dataList:[]}},watch:{keyCode:{handler:function(t,e){var a=this;this.$nextTick((function(){a.loadTranslateData()}))},immediate:!0}},computed:{formItemLayout:function(){return{labelCol:{span:4},wrapperCol:{span:14}}}},mounted:function(){var t=this;u({}).then((function(e){if(0!=e.code){var a=[{id:"zh",title:"中文"},{id:"en",title:"英文"},{id:"jp",title:"日语"}];t.setLanguages(a)}else t.setLanguages(e.data)}))},methods:{emptyDataList:function(){return[{code:this.keyCode,en:"",index:1,jp:"",zh:this.keyCode,isEnableEdit:!0,isNew:!0}]},loadTranslateData:function(t){var e=this;if(this.keyCode){var a={code:this.keyCode};l(a).then((function(t){0==t.code&&(t.data||(t.data=[]),t.data.forEach((function(t,e){t.index=e})),0==t.data.length&&(t.data=e.emptyDataList()),e.dataList=t.data)}))}else this.dataList=this.emptyDataList()},handleCancel:function(t){this.$set(t,"isEnableEdit",!1)},getEditStatus:function(){return this.dataList.filter((function(t){return t.isEnableEdit})).length},setLanguages:function(t){t.length>5?this.tableScroll={x:"calc(".concat(100*t.length,"px + 50%)")}:this.tableScroll={},this.languages=t,this.columns=[].concat(Object(o["a"])(t.map((function(t){return{title:t.title,dataIndex:t.id,scopedSlots:{customRender:t.id}}}))),[Object(s["a"])(Object(s["a"])({title:this.$t("public.action"),dataIndex:"action"},t.length>5?{fixed:"right",width:"160px"}:{}),{},{scopedSlots:{customRender:"action"}})]),this.loadTranslateData()},handleSave:function(t){var e=this;this.keyCode?t.jp&&t.en?t.isNew?e.$Add(e,t.code).then((function(){r(t).then((function(a){e.toast(a),0==a.code&&(t.isEnableEdit=!1,t.isNew=!1,t.id=a.data)}))})):e.$Update(e,t.code).then((function(){c(t).then((function(a){e.toast(a),0==a.code&&(t.isEnableEdit=!1)}))})):this.$message.warning("请输入翻译"):this.$message.warning("请输入名称")},toDate:function(t){return this.$moment(1e3*t).format("YYYY-MM-DD HH:mm:ss")}}},p=h,f=a("2877"),b=Object(f["a"])(p,n,i,!1,null,null,null);e["default"]=b.exports}}]);