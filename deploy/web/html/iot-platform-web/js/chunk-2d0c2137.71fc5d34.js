(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c2137"],{4984:function(e,t,a){"use strict";a.r(t);a("b0c0");var n=function(){var e=this,t=e._self._c;return t("a-card",{attrs:{bordered:!1}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:20}},[t("a-col",e._b({},"a-col",e.aColFlex,!1),[t("a-form-item",[t("a-input",{attrs:{placeholder:"请输入帮助中心名称",allowClear:!0},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.query.apply(null,arguments)}},model:{value:e.queryParam.query.name,callback:function(t){e.$set(e.queryParam.query,"name",t)},expression:"queryParam.query.name"}})],1)],1),t("a-col",e._b({},"a-col",e.aColFlex,!1),[t("a-form-item",[t("a-select",{attrs:{placeholder:"请选择模板类型",options:e.$DictList("app_template_type"),allowClear:!0},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.query.apply(null,arguments)}},model:{value:e.queryParam.query.templateType,callback:function(t){e.$set(e.queryParam.query,"templateType",t)},expression:"queryParam.query.templateType"}})],1)],1),t("a-col",e._b({},"a-col",e.aColFlex,!1),[t("a-form-item",[t("a-select",{attrs:{placeholder:"请选择版本号",options:e.versionOptions,allowClear:!0},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.query.apply(null,arguments)}},model:{value:e.queryParam.query.version,callback:function(t){e.$set(e.queryParam.query,"version",t)},expression:"queryParam.query.version"}})],1)],1),t("a-col",e._b({},"a-col",e.aColFlex,!1),[t("span",{staticClass:"table-page-search-submitButtons"},[t("a-button",{attrs:{icon:"search",type:"primary"},on:{click:e.query}},[e._v(" "+e._s(e.$t("public.search"))+" ")]),t("a-divider",{attrs:{type:"vertical"}}),t("a-button",{attrs:{icon:"redo"},on:{click:e.reset}},[e._v(" 重置 ")]),t("a-divider",{attrs:{type:"vertical"}}),t("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(t){return e.handleAdd()}}},[e._v(" 创建 ")])],1)])],1)],1)],1),t("a-table",{attrs:{size:"small",rowKey:"id","data-source":e.dataSource,columns:e.columns,loading:e.loading,pagination:e.pagination},on:{change:e.onChangePagination},scopedSlots:e._u([{key:"updatedAt",fn:function(t,a){return[e._v(" "+e._s(e._f("momentFilter")(a.updatedAt))+" ")]}},{key:"templateType",fn:function(t,a){return[e._v(" "+e._s(e.$DictName("app_template_type",a.templateType))+" ")]}},{key:"action",fn:function(a,n){return[t("a-button",{attrs:{type:"link",size:"small",icon:"edit"},on:{click:function(t){return e.handleEdit(n.id)}}},[e._v(" 修改 ")]),t("a-divider",{attrs:{type:"vertical"}}),t("a-button",{attrs:{type:"link",size:"small",icon:"menu"},on:{click:function(t){return e.handleEditContent(n.id)}}},[e._v(" 编辑内容 ")]),t("a-divider",{attrs:{type:"vertical"}}),t("a-button",{attrs:{type:"link",size:"small",icon:"menu"},on:{click:function(t){return e.handleCopy(n)}}},[e._v(" 复制 ")]),t("a-divider",{attrs:{type:"vertical"}}),t("a-button",{attrs:{type:"link",size:"small",icon:"delete"},on:{click:function(t){return e.handleDelete(n.id)}}},[e._v(" 删除 ")])]}}])}),t("form-modal",{ref:"formModal",on:{handleOk:e.handleOk}})],1)},r=[],i=a("c7eb"),o=a("1da1"),u=(a("99af"),a("d81d"),a("a630"),a("3ca3"),a("d3b7"),a("6062"),a("ddb0"),a("d3d6")),l=a("0f49"),c=10,s={name:"HelpCenter",components:{"form-modal":u["default"]},data:function(){return{isInit:!1,queryParam:{page:1,limit:c,query:{}},loading:!1,dataSource:[],columns:[{title:"序号",width:"46px",customRender:function(e,t,a){return a+1}},{dataIndex:"name",title:"帮助中心名称"},{dataIndex:"templateType",title:"模板类型",scopedSlots:{customRender:"templateType"}},{dataIndex:"version",title:"模板版本号"},{dataIndex:"count",title:"总问题数量"},{dataIndex:"updatedAt",title:"更新时间",scopedSlots:{customRender:"updatedAt"},width:"104px"},{title:"操作",key:"action",align:"center",width:"360px",scopedSlots:{customRender:"action"}}],pagination:{showSizeChanger:!0,current:1,pageSize:c,total:0,showTotal:function(e,t){return"总数:".concat(e," 当前:").concat(t[0],"-").concat(t[1])}},fieldName:"",defaultVal:"",versionOptions:[]}},created:function(){this.isInit=!0,this.queryList(),this.getAppTemplateList()},activated:function(){this.isInit?this.isInit=!1:this.queryList()},methods:{onChangePagination:function(e){this.queryParam.page=e.current,this.queryParam.limit=e.pageSize,this.pagination.current=e.current,this.pagination.pageSize=e.pageSize,this.queryList()},queryList:function(){var e=this;return Object(o["a"])(Object(i["a"])().mark((function t(){var a,n;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,Object(l["M"])(e.queryParam);case 3:if(n=t.sent,e.loading=!1,0===n.code){t.next=7;break}return t.abrupt("return");case 7:e.dataSource=(null===(a=n.data)||void 0===a?void 0:a.list)||[],e.pagination.total=n.data.total;case 9:case"end":return t.stop()}}),t)})))()},getAppTemplateList:function(){var e=this;return Object(o["a"])(Object(i["a"])().mark((function t(){var a,n,r,o;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["D"])({query:{}});case 2:if(r=t.sent,0===r.code){t.next=5;break}return t.abrupt("return");case 5:o=(null===r||void 0===r||null===(a=r.data)||void 0===a||null===(a=a.list)||void 0===a?void 0:a.map((function(e){return e.version})))||[],e.versionOptions=(null===(n=Array.from(new Set(o)))||void 0===n?void 0:n.map((function(e){return{label:e,value:e}})))||[];case 7:case"end":return t.stop()}}),t)})))()},query:function(){this.queryParam.page=1,this.pagination.current=1,this.queryList()},reset:function(){this.queryParam={page:1,limit:this.queryParam.limit,query:{}},this.pagination.current=1,this.queryList()},handleAdd:function(){this.$refs["formModal"].init("add")},handleEdit:function(e){this.$refs["formModal"].init("edit",e)},handleCopy:function(e){this.$refs["formModal"].init("copy",e.id,e.count)},handleOk:function(){this.queryList()},handleEditContent:function(e){this.$routerPush({path:"/oem-app/help-center/details",query:{id:e}})},handleDelete:function(e){var t=this;this.$confirm({title:"确定是否删除",content:"删除后，将不可恢复",onOk:function(){var a=Object(o["a"])(Object(i["a"])().mark((function a(){var n;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(l["p"])({id:e});case 2:if(n=a.sent,0===n.code){a.next=5;break}return a.abrupt("return");case 5:t.queryList();case 6:case"end":return a.stop()}}),a)})));function n(){return a.apply(this,arguments)}return n}()})}}},d=s,p=a("2877"),y=Object(p["a"])(d,n,r,!1,null,"4e0f48c2",null);t["default"]=y.exports}}]);